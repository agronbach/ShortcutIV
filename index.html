<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* floating footer fix from: https://stackoverflow.com/questions/13881548/sticky-footer-hiding-content */
      html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
   position:relative;
}

#body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
}
#footer {
   position:absolute;
   bottom:0;
   text-align: center;
   width:100%;
   height:50px;   /* Height of the footer */
   background:#C0C0C0;
}
  
/*
.footer {
  position: fixed;
  opacity: 1;
  background-color: rgba(192,192,192,1);
  left: 0;
  bottom: 0;
  width: 100%;
  text-align: center;
}*/
/* IE 6 and down:
#container {
   height:100%;
}*/

/* Center tables for demo */
[data-table-theme*=gray] {
  margin: 0 auto;
  color: #333;
  background: white;
  border: 1px solid grey;
  font-size: 12pt;
  border-collapse: collapse;
}
  
[data-table-theme*=highlight] {
  color: white;
  background: #2BA32A;
}

[data-table-theme*=gray] thead th,
[data-table-theme*=gray] tfoot th {
  padding: 0.5em;
  border: 1px solid lightgrey;
}

[data-table-theme*=gray] caption {
  padding: 0.5em;
}

/* Blank Table Style */
[data-table-theme*=blank] {
  border: 0px;
}
  
.grecaptcha-badge {
visibility: hidden;
}
</style>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141600603-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-141600603-1');
    </script>
    <!--Rest of Head-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ShortcutIV - PvP Rankings Calculator</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LfY-KYUAAAAAIYnP89WU5GWU-MMg_uy0z_7t9c2"></script>
  </head>
  <div id="container">
  <div id="body"><body>
    <form align=center>
      <div class="ui-widget">
        <input id="mon" placeholder="Pok&eacute;mon" required>
      </div>
     <table align=center cellspacing="0" cellpadding="0" data-table-theme=blank>
      <tr><td>Atk</td><td>Def</td><td>Sta</td><td>Min</td></tr>
      <tr><td>IV</td> <td>IV</td> <td>IV</td> <td>Lvl</td></tr>
      <td><select id="AttackIV">
        <option value="15">15</option>
        <option value="14">14</option>
        <option value="13">13</option>
        <option value="12">12</option>
        <option value="11">11</option>
        <option value="10">10</option>
        <option value="9">9</option>
        <option value="8">8</option>
        <option value="7">7</option>
        <option value="6">6</option>
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
        <option value="0">0</option>
      </select></td>
      <td><select id="DefenseIV">
        <option value="15">15</option>
        <option value="14">14</option>
        <option value="13">13</option>
        <option value="12">12</option>
        <option value="11">11</option>
        <option value="10">10</option>
        <option value="9">9</option>
        <option value="8">8</option>
        <option value="7">7</option>
        <option value="6">6</option>
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
        <option value="0">0</option>
      </select></td>
      <td><select id="StaminaIV">
        <option value="15">15</option>
        <option value="14">14</option>
        <option value="13">13</option>
        <option value="12">12</option>
        <option value="11">11</option>
        <option value="10">10</option>
        <option value="9">9</option>
        <option value="8">8</option>
        <option value="7">7</option>
        <option value="6">6</option>
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
        <option value="0">0</option>
      </select></td>
      <td><select id="minLvl">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
      </select></td>
      <td hidden><select id="maxLvl">
        <option value="40">40</option>
        <option value="39">39</option>
        <option value="38">38</option>
        <option value="37">37</option>
        <option value="36">36</option>
        <option value="35">35</option>
        <option value="34">34</option>
        <option value="33">33</option>
        <option value="32">32</option>
        <option value="31">31</option>
        <option value="30">30</option>
        <option value="29">29</option>
        <option value="28">28</option>
        <option value="27">27</option>
        <option value="26">26</option>
        <option value="25">25</option>
        <option value="24">24</option>
        <option value="23">23</option>
        <option value="22">22</option>
        <option value="21">21</option>
        <option value="20">20</option>
        <option value="19">19</option>
        <option value="18">18</option>
        <option value="17">17</option>
        <option value="16">16</option>
        <option value="15">15</option>
        <option value="14">14</option>
        <option value="13">13</option>
        <option value="12">12</option>
        <option value="11">11</option>
        <option value="10">10</option>
        <option value="9">9</option>
        <option value="8">8</option>
        <option value="7">7</option>
        <option value="6">6</option>
        <option value="5">5</option>
        <option value="4">4</option>
        <option value="3">3</option>
        <option value="2">2</option>
        <option value="1">1</option>
      </select></td>
       <td hidden><select id="maxHP"><option value="0">0</option></select></td>
       <td hidden><select id="maxDef"><option value="0">0</option></select></td>
       <td hidden><select id="maxAtk"><option value="0">0</option></select></td>
      </table>
      <table align=center cellspacing="0" cellpadding="0" data-table-theme=blank>
      <tr>
        <td>Minimum IVs to Search</td>
        <td>Top</td>
      </tr>
      <tr>
        <td><select id="minIVs">
        <option value="0">0: Wild Caught</option>
        <option value="1">1: Trade, Good Friend</option>
        <option value="2">2: Trade, Great Friend</option>
        <option value="3">3: Trade, Ultra Friend</option>
        <option value="4">4: Weather Boost</option>
        <option value="5">5: Trade, Best Friend</option>
        <option value="10">10: Raid/Hatch</option>
        <option value="12">12: Lucky Trade</option>
        </select></td>
        <td><select id="TopRanks">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="250">250</option>
        <option value="500">500</option>
        <option value="1000">1000</option>
        <option value="4096">All</option>
        </select></td> 
      </tr>
      </table>
      <table align=center cellspacing="0" cellpadding="4" data-table-theme=blank><tr>
      <td><select id="league">
        <option value="1500">Great League (1500)</option>
        <option value="2500">Ultra League (2500)</option>
        <option value="5000">Master League</option>
      </select></td>
      <td><input id="Calculate" type="button" value="Calculate" onclick="getFormData()" /></td>
      </tr></table>
    </form>
    <div style="overflow-x:auto;">
      <table data-table-theme=gray><div id= "box"></div></table>
    </div>
    
    <!-- Footer Code Below -->
    <div id="footer">
      <table align=center cellspacing="0" cellpadding="0" data-table-theme=blank>
        <tr><a href="https://routinehub.co/shortcut/1721">Try iOS ShortcutIV</a> &#124; <a href="https://discord.gg/UD4Temq">Join our Discord</a> &#124; <a href="https://www.patreon.com/bePatron?u=7793657" data-patreon-widget-type="become-patron-button"><img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" width=auto height="22"></a>
        </tr>
        <br/>
        <tr><a href="https://www.google.com/recaptcha/intro/v3.html">Protected by reCAPTCHA v3</a> &#124; ShortcutIV ©2019</tr>
      </table>
    </div>
    <script>
      
      // Global Array for CPM values, w/ half-levels
      var cpm = [0.094, 0.1351374318, 0.16639787, 0.192650919, 0.21573247, 0.2365726613, 0.25572005, 0.2735303812, 0.29024988, 0.3060573775, 0.3210876, 0.3354450362, 0.34921268, 0.3624577511, 0.3752356, 0.387592416, 0.39956728, 0.4111935514, 0.4225, 0.4329264091, 0.44310755, 0.4530599591, 0.4627984, 0.472336093, 0.48168495, 0.4908558003, 0.49985844, 0.508701765, 0.51739395, 0.5259425113, 0.5343543, 0.5426357375, 0.5507927, 0.5588305862, 0.5667545, 0.5745691333, 0.5822789, 0.5898879072, 0.5974, 0.6048236651, 0.6121573, 0.6194041216, 0.6265671, 0.6336491432, 0.64065295, 0.6475809666, 0.65443563, 0.6612192524, 0.667934, 0.6745818959, 0.6811649, 0.6876849038, 0.69414365, 0.70054287, 0.7068842, 0.7131691091, 0.7193991, 0.7255756136, 0.7317, 0.7347410093, 0.7377695, 0.7407855938, 0.74378943, 0.7467812109, 0.74976104, 0.7527290867, 0.7556855, 0.7586303683, 0.76156384, 0.7644860647, 0.76739717, 0.7702972656, 0.7731865, 0.7760649616, 0.77893275, 0.7817900548, 0.784637, 0.7874736075, 0.7903]
      
      // Global variables to track min/max Stats across all IVs
      var maxHP = 0;
      var maxDef = 0;
      var maxAtk = 0;
      
      // global array containing all available mon and base stats (a/d/s)
      var availableMon = [
          {'label': 'Abomasnow #460', 'value': '178 158 207'},
          {'label': 'Abra #63', 'value': '195 82 93'},
          {'label': 'Absol #359', 'value': '246 120 163'},
          {'label': 'Aerodactyl #142', 'value': '221 159 190'},
          {'label': 'Aggron #306', 'value': '198 257 172'},
          {'label': 'Aipom #190', 'value': '136 112 146'},
          {'label': 'Alakazam #65', 'value': '271 167 146'},
          {'label': 'Altaria #334', 'value': '141 201 181'},
          {'label': 'Ambipom #424', 'value': '205 143 181'},
          {'label': 'Ampharos #181', 'value': '211 169 207'},
          {'label': 'Anorith #347', 'value': '176 100 128'},
          {'label': 'Arbok #24', 'value': '167 153 155'},
          {'label': 'Arcanine #59', 'value': '227 166 207'},
          {'label': 'Arceus (Bug) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Dark) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Dragon) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Electric) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Fairy) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Fighting) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Fire) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Flying) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Ghost) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Grass) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Ground) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Ice) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Normal) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Poison) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Psychic) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Rock) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Steel) #493', 'value': '238 238 237'},
          {'label': 'Arceus (Water) #493', 'value': '238 238 237'},
          {'label': 'Ariados #168', 'value': '161 124 172'},
          {'label': 'Armaldo #348', 'value': '222 174 181'},
          {'label': 'Aron #304', 'value': '121 141 137'},
          {'label': 'Articuno #144', 'value': '192 236 207'},
          {'label': 'Azelf #482', 'value': '270 151 181'},
          {'label': 'Azumarill #184', 'value': '112 152 225'},
          {'label': 'Azurill #298', 'value': '36 71 137'},
          {'label': 'Bagon #371', 'value': '134 93 128'},
          {'label': 'Baltoy #343', 'value': '77 124 120'},
          {'label': 'Banette #354', 'value': '218 126 162'},
          {'label': 'Barboach #339', 'value': '93 82 137'},
          {'label': 'Bastiodon #411', 'value': '94 286 155'},
          {'label': 'Bayleef #153', 'value': '122 155 155'},
          {'label': 'Beautifly #267', 'value': '189 98 155'},
          {'label': 'Beedrill #15', 'value': '169 130 163'},
          {'label': 'Beldum #374', 'value': '96 132 120'},
          {'label': 'Bellossom #182', 'value': '169 186 181'},
          {'label': 'Bellsprout #69', 'value': '139 61 137'},
          {'label': 'Bibarel #400', 'value': '162 119 188'},
          {'label': 'Bidoof #399', 'value': '80 73 153'},
          {'label': 'Blastoise #9', 'value': '171 207 188'},
          {'label': 'Blaziken #257', 'value': '240 141 190'},
          {'label': 'Blissey #242', 'value': '129 169 496'},
          {'label': 'Bonsly #438', 'value': '124 133 137'},
          {'label': 'Breloom #286', 'value': '241 144 155'},
          {'label': 'Bronzong #437', 'value': '161 213 167'},
          {'label': 'Bronzor #436', 'value': '43 154 149'},
          {'label': 'Budew #406', 'value': '91 109 120'},
          {'label': 'Buizel #418', 'value': '132 67 146'},
          {'label': 'Bulbasaur #1', 'value': '118 111 128'},
          {'label': 'Buneary #427', 'value': '130 105 146'},
          {'label': 'Burmy #412', 'value': '53 83 120'},
          {'label': 'Butterfree #12', 'value': '167 137 155'},
          {'label': 'Cacnea #331', 'value': '156 74 137'},
          {'label': 'Cacturne #332', 'value': '221 115 172'},
          {'label': 'Camerupt #323', 'value': '194 136 172'},
          {'label': 'Carnivine #455', 'value': '187 136 179'},
          {'label': 'Carvanha #318', 'value': '171 39 128'},
          {'label': 'Cascoon #268', 'value': '60 77 137'},
          {'label': 'Castform (Normal) #351', 'value': '139 139 172'},
          {'label': 'Castform (Rainy) #351', 'value': '139 139 172'},
          {'label': 'Castform (Snowy) #351', 'value': '139 139 172'},
          {'label': 'Castform (Sunny) #351', 'value': '139 139 172'},
          {'label': 'Caterpie #10', 'value': '55 55 128'},
          {'label': 'Celebi #251', 'value': '210 210 225'},
          {'label': 'Chansey #113', 'value': '60 128 487'},
          {'label': 'Charizard #6', 'value': '223 173 186'},
          {'label': 'Charmander #4', 'value': '116 93 118'},
          {'label': 'Charmeleon #5', 'value': '158 126 151'},
          {'label': 'Chatot #441', 'value': '183 91 183'},
          {'label': 'Cherrim (Overcast) #421', 'value': '170 153 172'},
          {'label': 'Cherrim (Sunny) #421', 'value': '170 153 172'},
          {'label': 'Cherubi #420', 'value': '108 92 128'},
          {'label': 'Chikorita #152', 'value': '92 122 128'},
          {'label': 'Chimchar #390', 'value': '113 86 127'},
          {'label': 'Chimecho #358', 'value': '175 170 181'},
          {'label': 'Chinchou #170', 'value': '106 97 181'},
          {'label': 'Chingling #433', 'value': '114 94 128'},
          {'label': 'Clamperl #366', 'value': '133 135 111'},
          {'label': 'Claydol #344', 'value': '140 229 155'},
          {'label': 'Clefable #36', 'value': '178 162 216'},
          {'label': 'Clefairy #35', 'value': '107 108 172'},
          {'label': 'Cleffa #173', 'value': '75 79 137'},
          {'label': 'Cloyster #91', 'value': '186 256 137'},
          {'label': 'Combee #415', 'value': '59 83 102'},
          {'label': 'Combusken #256', 'value': '163 115 155'},
          {'label': 'Corphish #341', 'value': '141 99 125'},
          {'label': 'Corsola #222', 'value': '118 156 146'},
          {'label': 'Cradily #346', 'value': '152 194 200'},
          {'label': 'Cranidos #408', 'value': '218 71 167'},
          {'label': 'Crawdaunt #342', 'value': '224 142 160'},
          {'label': 'Cresselia #488', 'value': '152 258 260'},
          {'label': 'Croagunk #453', 'value': '116 76 134'},
          {'label': 'Crobat #169', 'value': '194 178 198'},
          {'label': 'Croconaw #159', 'value': '150 142 163'},
          {'label': 'Cubone #104', 'value': '90 144 137'},
          {'label': 'Cyndaquil #155', 'value': '116 93 118'},
          {'label': 'Darkrai #491', 'value': '285 198 172'},
          {'label': 'Delcatty #301', 'value': '132 127 172'},
          {'label': 'Delibird #225', 'value': '128 90 128'},
          {'label': 'Deoxys (Attack) #386', 'value': '414 46 137'},
          {'label': 'Deoxys (Defense) #386', 'value': '144 330 137'},
          {'label': 'Deoxys (Normal) #386', 'value': '345 115 137'},
          {'label': 'Deoxys (Speed) #386', 'value': '230 218 137'},
          {'label': 'Dewgong #87', 'value': '139 177 207'},
          {'label': 'Dialga #483', 'value': '275 211 205'},
          {'label': 'Diglett (Alola) #50', 'value': '109 82 67'},
          {'label': 'Diglett (Normal) #50', 'value': '109 78 67'},
          {'label': 'Ditto #132', 'value': '91 91 134'},
          {'label': 'Dodrio #85', 'value': '218 140 155'},
          {'label': 'Doduo #84', 'value': '158 83 111'},
          {'label': 'Donphan #232', 'value': '214 185 207'},
          {'label': 'Dragonair #148', 'value': '163 135 156'},
          {'label': 'Dragonite #149', 'value': '263 198 209'},
          {'label': 'Drapion #452', 'value': '180 202 172'},
          {'label': 'Dratini #147', 'value': '119 91 121'},
          {'label': 'Drifblim #426', 'value': '180 102 312'},
          {'label': 'Drifloon #425', 'value': '117 80 207'},
          {'label': 'Drowzee #96', 'value': '89 136 155'},
          {'label': 'Dugtrio (Alola) #51', 'value': '201 145 111'},
          {'label': 'Dugtrio (Normal) #51', 'value': '167 134 111'},
          {'label': 'Dunsparce #206', 'value': '131 128 225'},
          {'label': 'Dusclops #356', 'value': '124 234 120'},
          {'label': 'Dusknoir #477', 'value': '180 254 128'},
          {'label': 'Duskull #355', 'value': '70 162 85'},
          {'label': 'Dustox #269', 'value': '98 162 155'},
          {'label': 'Eevee #133', 'value': '104 114 146'},
          {'label': 'Ekans #23', 'value': '110 97 111'},
          {'label': 'Electabuzz #125', 'value': '198 158 163'},
          {'label': 'Electivire #466', 'value': '249 163 181'},
          {'label': 'Electrike #309', 'value': '123 78 120'},
          {'label': 'Electrode #101', 'value': '173 173 155'},
          {'label': 'Elekid #239', 'value': '135 101 128'},
          {'label': 'Empoleon #395', 'value': '210 186 197'},
          {'label': 'Entei #244', 'value': '235 171 251'},
          {'label': 'Espeon #196', 'value': '261 175 163'},
          {'label': 'Exeggcute #102', 'value': '107 125 155'},
          {'label': 'Exeggutor (Alola) #103', 'value': '230 153 216'},
          {'label': 'Exeggutor (Normal) #103', 'value': '233 149 216'},
          {'label': 'Exploud #295', 'value': '179 137 232'},
          {'label': 'Farfetch\'d #83', 'value': '124 115 141'},
          {'label': 'Fearow #22', 'value': '182 133 163'},
          {'label': 'Feebas #349', 'value': '29 85 85'},
          {'label': 'Feraligatr #160', 'value': '205 188 198'},
          {'label': 'Finneon #456', 'value': '96 116 135'},
          {'label': 'Flaaffy #180', 'value': '145 109 172'},
          {'label': 'Flareon #136', 'value': '246 179 163'},
          {'label': 'Floatzel #419', 'value': '221 114 198'},
          {'label': 'Flygon #330', 'value': '205 168 190'},
          {'label': 'Forretress #205', 'value': '161 205 181'},
          {'label': 'Froslass #478', 'value': '171 150 172'},
          {'label': 'Furret #162', 'value': '148 125 198'},
          {'label': 'Gabite #444', 'value': '172 125 169'},
          {'label': 'Gallade #475', 'value': '237 195 169'},
          {'label': 'Garchomp #445', 'value': '261 193 239'},
          {'label': 'Gardevoir #282', 'value': '237 195 169'},
          {'label': 'Gastly #92', 'value': '186 67 102'},
          {'label': 'Gastrodon (East_sea) #423', 'value': '169 143 244'},
          {'label': 'Gastrodon (West_sea) #423', 'value': '169 143 244'},
          {'label': 'Gengar #94', 'value': '261 149 155'},
          {'label': 'Geodude (Alola) #74', 'value': '132 132 120'},
          {'label': 'Geodude (Normal) #74', 'value': '132 132 120'},
          {'label': 'Gible #443', 'value': '124 84 151'},
          {'label': 'Girafarig #203', 'value': '182 133 172'},
          {'label': 'Giratina (Altered) #487', 'value': '187 225 284'},
          {'label': 'Giratina (Origin) #487', 'value': '225 187 284'},
          {'label': 'Glaceon #471', 'value': '238 205 163'},
          {'label': 'Glalie #362', 'value': '162 162 190'},
          {'label': 'Glameow #431', 'value': '109 82 135'},
          {'label': 'Gligar #207', 'value': '143 184 163'},
          {'label': 'Gliscor #472', 'value': '185 222 181'},
          {'label': 'Gloom #44', 'value': '153 136 155'},
          {'label': 'Golbat #42', 'value': '161 150 181'},
          {'label': 'Goldeen #118', 'value': '123 110 128'},
          {'label': 'Golduck #55', 'value': '191 162 190'},
          {'label': 'Golem (Alola) #76', 'value': '211 198 190'},
          {'label': 'Golem (Normal) #76', 'value': '211 198 190'},
          {'label': 'Gorebyss #368', 'value': '211 179 146'},
          {'label': 'Granbull #210', 'value': '212 131 207'},
          {'label': 'Graveler (Alola) #75', 'value': '164 164 146'},
          {'label': 'Graveler (Normal) #75', 'value': '164 164 146'},
          {'label': 'Grimer (Alola) #88', 'value': '135 90 190'},
          {'label': 'Grimer (Normal) #88', 'value': '135 90 190'},
          {'label': 'Grotle #388', 'value': '157 143 181'},
          {'label': 'Groudon #383', 'value': '270 228 205'},
          {'label': 'Grovyle #253', 'value': '172 120 137'},
          {'label': 'Growlithe #58', 'value': '136 93 146'},
          {'label': 'Grumpig #326', 'value': '171 188 190'},
          {'label': 'Gulpin #316', 'value': '80 99 172'},
          {'label': 'Gyarados #130', 'value': '237 186 216'},
          {'label': 'Happiny #440', 'value': '25 77 225'},
          {'label': 'Hariyama #297', 'value': '209 114 302'},
          {'label': 'Haunter #93', 'value': '223 107 128'},
          {'label': 'Heatran #485', 'value': '251 213 209'},
          {'label': 'Heracross #214', 'value': '234 179 190'},
          {'label': 'Hippopotas #449', 'value': '124 118 169'},
          {'label': 'Hippowdon #450', 'value': '201 191 239'},
          {'label': 'Hitmonchan #107', 'value': '193 197 137'},
          {'label': 'Hitmonlee #106', 'value': '224 181 137'},
          {'label': 'Hitmontop #237', 'value': '173 207 137'},
          {'label': 'Ho-Oh #250', 'value': '239 244 214'},
          {'label': 'Honchkrow #430', 'value': '243 103 225'},
          {'label': 'Hoothoot #163', 'value': '67 88 155'},
          {'label': 'Hoppip #187', 'value': '67 94 111'},
          {'label': 'Horsea #116', 'value': '129 103 102'},
          {'label': 'Houndoom #229', 'value': '224 144 181'},
          {'label': 'Houndour #228', 'value': '152 83 128'},
          {'label': 'Huntail #367', 'value': '197 179 146'},
          {'label': 'Hypno #97', 'value': '144 193 198'},
          {'label': 'Igglybuff #174', 'value': '69 32 207'},
          {'label': 'Illumise #314', 'value': '143 166 163'},
          {'label': 'Infernape #392', 'value': '222 151 183'},
          {'label': 'Ivysaur #2', 'value': '151 143 155'},
          {'label': 'Jigglypuff #39', 'value': '80 41 251'},
          {'label': 'Jirachi #385', 'value': '210 210 225'},
          {'label': 'Jolteon #135', 'value': '232 182 163'},
          {'label': 'Jumpluff #189', 'value': '118 183 181'},
          {'label': 'Jynx #124', 'value': '223 151 163'},
          {'label': 'Kabuto #140', 'value': '148 140 102'},
          {'label': 'Kabutops #141', 'value': '220 186 155'},
          {'label': 'Kadabra #64', 'value': '232 117 120'},
          {'label': 'Kakuna #14', 'value': '46 75 128'},
          {'label': 'Kangaskhan #115', 'value': '181 165 233'},
          {'label': 'Kecleon #352', 'value': '161 189 155'},
          {'label': 'Kingdra #230', 'value': '194 194 181'},
          {'label': 'Kingler #99', 'value': '240 181 146'},
          {'label': 'Kirlia #281', 'value': '117 90 116'},
          {'label': 'Koffing #109', 'value': '119 141 120'},
          {'label': 'Krabby #98', 'value': '181 124 102'},
          {'label': 'Kricketot #401', 'value': '45 74 114'},
          {'label': 'Kricketune #402', 'value': '160 100 184'},
          {'label': 'Kyogre #382', 'value': '270 228 205'},
          {'label': 'Lairon #305', 'value': '158 198 155'},
          {'label': 'Lanturn #171', 'value': '146 137 268'},
          {'label': 'Lapras #131', 'value': '165 174 277'},
          {'label': 'Larvitar #246', 'value': '115 93 137'},
          {'label': 'Latias #380', 'value': '228 246 190'},
          {'label': 'Latios #381', 'value': '268 212 190'},
          {'label': 'Leafeon #470', 'value': '216 219 163'},
          {'label': 'Ledian #166', 'value': '107 179 146'},
          {'label': 'Ledyba #165', 'value': '72 118 120'},
          {'label': 'Lickilicky #463', 'value': '161 181 242'},
          {'label': 'Lickitung #108', 'value': '108 137 207'},
          {'label': 'Lileep #345', 'value': '105 150 165'},
          {'label': 'Linoone #264', 'value': '142 128 186'},
          {'label': 'Lombre #271', 'value': '112 119 155'},
          {'label': 'Lopunny #428', 'value': '156 194 163'},
          {'label': 'Lotad #270', 'value': '71 77 120'},
          {'label': 'Loudred #294', 'value': '134 81 197'},
          {'label': 'Lucario #448', 'value': '236 144 172'},
          {'label': 'Ludicolo #272', 'value': '173 176 190'},
          {'label': 'Lugia #249', 'value': '193 310 235'},
          {'label': 'Lumineon #457', 'value': '142 170 170'},
          {'label': 'Lunatone #337', 'value': '178 153 207'},
          {'label': 'Luvdisc #370', 'value': '81 128 125'},
          {'label': 'Luxio #404', 'value': '159 95 155'},
          {'label': 'Luxray #405', 'value': '232 156 190'},
          {'label': 'Machamp #68', 'value': '234 159 207'},
          {'label': 'Machoke #67', 'value': '177 125 190'},
          {'label': 'Machop #66', 'value': '137 82 172'},
          {'label': 'Magby #240', 'value': '151 99 128'},
          {'label': 'Magcargo #219', 'value': '139 191 137'},
          {'label': 'Magikarp #129', 'value': '29 85 85'},
          {'label': 'Magmar #126', 'value': '206 154 163'},
          {'label': 'Magmortar #467', 'value': '247 172 181'},
          {'label': 'Magnemite #81', 'value': '165 121 93'},
          {'label': 'Magneton #82', 'value': '223 169 137'},
          {'label': 'Magnezone #462', 'value': '238 205 172'},
          {'label': 'Makuhita #296', 'value': '99 54 176'},
          {'label': 'Mamoswine #473', 'value': '247 146 242'},
          {'label': 'Manaphy #490', 'value': '210 210 225'},
          {'label': 'Manectric #310', 'value': '215 127 172'},
          {'label': 'Mankey #56', 'value': '148 82 120'},
          {'label': 'Mantine #226', 'value': '148 226 163'},
          {'label': 'Mantyke #458', 'value': '105 179 128'},
          {'label': 'Mareep #179', 'value': '114 79 146'},
          {'label': 'Marill #183', 'value': '37 93 172'},
          {'label': 'Marowak (Alola) #105', 'value': '144 186 155'},
          {'label': 'Marowak (Normal) #105', 'value': '144 186 155'},
          {'label': 'Marshtomp #259', 'value': '156 133 172'},
          {'label': 'Masquerain #284', 'value': '192 150 172'},
          {'label': 'Mawile #303', 'value': '155 141 137'},
          {'label': 'Medicham #308', 'value': '121 152 155'},
          {'label': 'Meditite #307', 'value': '78 107 102'},
          {'label': 'Meganium #154', 'value': '168 202 190'},
          {'label': 'Melmetal #809', 'value': '231 213 264'},
          {'label': 'Meltan #808', 'value': '112 113 130'},
          {'label': 'Meowth (Alola) #52', 'value': '99 78 120'},
          {'label': 'Meowth (Normal) #52', 'value': '92 78 120'},
          {'label': 'Mesprit #481', 'value': '212 212 190'},
          {'label': 'Metagross #376', 'value': '257 228 190'},
          {'label': 'Metang #375', 'value': '138 176 155'},
          {'label': 'Metapod #11', 'value': '45 80 137'},
          {'label': 'Mew #151', 'value': '210 210 225'},
          {'label': 'Mewtwo #150', 'value': '300 182 214'},
          {'label': 'Mightyena #262', 'value': '171 132 172'},
          {'label': 'Milotic #350', 'value': '192 219 216'},
          {'label': 'Miltank #241', 'value': '157 193 216'},
          {'label': 'Mime (Jr) #439', 'value': '125 142 85'},
          {'label': 'Minun #312', 'value': '147 150 155'},
          {'label': 'Misdreavus #200', 'value': '167 154 155'},
          {'label': 'Mismagius #429', 'value': '211 187 155'},
          {'label': 'Moltres #146', 'value': '251 181 207'},
          {'label': 'Monferno #391', 'value': '158 105 162'},
          {'label': 'Mothim #414', 'value': '185 98 172'},
          {'label': 'Mr. Mime #122', 'value': '192 205 120'},
          {'label': 'Mudkip #258', 'value': '126 93 137'},
          {'label': 'Muk (Alola) #89', 'value': '190 172 233'},
          {'label': 'Muk (Normal) #89', 'value': '190 172 233'},
          {'label': 'Munchlax #446', 'value': '137 117 286'},
          {'label': 'Murkrow #198', 'value': '175 87 155'},
          {'label': 'Natu #177', 'value': '134 89 120'},
          {'label': 'Nidoking #34', 'value': '204 156 191'},
          {'label': 'Nidoqueen #31', 'value': '180 173 207'},
          {'label': 'Nidoran♀ #29', 'value': '86 89 146'},
          {'label': 'Nidoran♂ #32', 'value': '105 76 130'},
          {'label': 'Nidorina #30', 'value': '117 120 172'},
          {'label': 'Nidorino #33', 'value': '137 111 156'},
          {'label': 'Nincada #290', 'value': '80 126 104'},
          {'label': 'Ninetales (Alola) #38', 'value': '170 193 177'},
          {'label': 'Ninetales (Normal) #38', 'value': '169 190 177'},
          {'label': 'Ninjask #291', 'value': '196 112 156'},
          {'label': 'Noctowl #164', 'value': '145 156 225'},
          {'label': 'Nosepass #299', 'value': '82 215 102'},
          {'label': 'Numel #322', 'value': '119 79 155'},
          {'label': 'Nuzleaf #274', 'value': '134 78 172'},
          {'label': 'Octillery #224', 'value': '197 141 181'},
          {'label': 'Oddish #43', 'value': '131 112 128'},
          {'label': 'Omanyte #138', 'value': '155 153 111'},
          {'label': 'Omastar #139', 'value': '207 201 172'},
          {'label': 'Onix #95', 'value': '85 232 111'},
          {'label': 'Pachirisu #417', 'value': '94 172 155'},
          {'label': 'Palkia #484', 'value': '280 215 189'},
          {'label': 'Paras #46', 'value': '121 99 111'},
          {'label': 'Parasect #47', 'value': '165 146 155'},
          {'label': 'Pelipper #279', 'value': '175 174 155'},
          {'label': 'Persian (Normal) #53', 'value': '150 136 163'},
          {'label': 'Persian (Alola) #53', 'value': '158 136 163'},
          {'label': 'Phanpy #231', 'value': '107 98 207'},
          {'label': 'Phione #489', 'value': '162 162 190'},
          {'label': 'Pichu #172', 'value': '77 53 85'},
          {'label': 'Pidgeot #18', 'value': '166 154 195'},
          {'label': 'Pidgeotto #17', 'value': '117 105 160'},
          {'label': 'Pidgey #16', 'value': '85 73 120'},
          {'label': 'Pikachu #25', 'value': '112 96 111'},
          {'label': 'Piloswine #221', 'value': '181 138 225'},
          {'label': 'Pineco #204', 'value': '108 122 137'},
          {'label': 'Pinsir #127', 'value': '238 182 163'},
          {'label': 'Piplup #393', 'value': '112 102 142'},
          {'label': 'Plusle #311', 'value': '167 129 155'},
          {'label': 'Politoed #186', 'value': '174 179 207'},
          {'label': 'Poliwag #60', 'value': '101 82 120'},
          {'label': 'Poliwhirl #61', 'value': '130 123 163'},
          {'label': 'Poliwrath #62', 'value': '182 184 207'},
          {'label': 'Ponyta #77', 'value': '170 127 137'},
          {'label': 'Poochyena #261', 'value': '96 61 111'},
          {'label': 'Porygon #137', 'value': '153 136 163'},
          {'label': 'Porygon Z #474', 'value': '264 150 198'},
          {'label': 'Porygon2 #233', 'value': '198 180 198'},
          {'label': 'Primeape #57', 'value': '207 138 163'},
          {'label': 'Prinplup #394', 'value': '150 139 162'},
          {'label': 'Probopass #476', 'value': '135 275 155'},
          {'label': 'Psyduck #54', 'value': '122 95 137'},
          {'label': 'Pupitar #247', 'value': '155 133 172'},
          {'label': 'Purugly #432', 'value': '172 133 174'},
          {'label': 'Quagsire #195', 'value': '152 143 216'},
          {'label': 'Quilava #156', 'value': '158 126 151'},
          {'label': 'Qwilfish #211', 'value': '184 138 163'},
          {'label': 'Raichu (Normal) #26', 'value': '193 151 155'},
          {'label': 'Raichu (Alola) #26', 'value': '201 154 155'},
          {'label': 'Raikou #243', 'value': '241 195 207'},
          {'label': 'Ralts #280', 'value': '79 59 99'},
          {'label': 'Rampardos #409', 'value': '295 109 219'},
          {'label': 'Rapidash #78', 'value': '207 162 163'},
          {'label': 'Raticate (Alola) #20', 'value': '135 154 181'},
          {'label': 'Raticate (Normal) #20', 'value': '161 139 146'},
          {'label': 'Rattata (Alola) #19', 'value': '103 70 102'},
          {'label': 'Rattata (Normal) #19', 'value': '103 70 102'},
          {'label': 'Rayquaza #384', 'value': '284 170 213'},
          {'label': 'Regice #378', 'value': '179 309 190'},
          {'label': 'Regigigas #486', 'value': '287 210 221'},
          {'label': 'Regirock #377', 'value': '179 309 190'},
          {'label': 'Registeel #379', 'value': '143 285 190'},
          {'label': 'Relicanth #369', 'value': '162 203 225'},
          {'label': 'Remoraid #223', 'value': '127 69 111'},
          {'label': 'Rhydon #112', 'value': '222 171 233'},
          {'label': 'Rhyhorn #111', 'value': '140 127 190'},
          {'label': 'Rhyperior #464', 'value': '241 190 251'},
          {'label': 'Riolu #447', 'value': '127 78 120'},
          {'label': 'Roselia #315', 'value': '186 131 137'},
          {'label': 'Roserade #407', 'value': '243 185 155'},
          {'label': 'Rotom (Fan) #479', 'value': '204 219 137'},
          {'label': 'Rotom (Frost) #479', 'value': '204 219 137'},
          {'label': 'Rotom (Heat) #479', 'value': '204 219 137'},
          {'label': 'Rotom (Mow) #479', 'value': '204 219 137'},
          {'label': 'Rotom (Normal) #479', 'value': '185 159 137'},
          {'label': 'Rotom (Wash) #479', 'value': '204 219 137'},
          {'label': 'Sableye #302', 'value': '141 136 137'},
          {'label': 'Salamence #373', 'value': '277 168 216'},
          {'label': 'Sandshrew (Normal) #27', 'value': '126 120 137'},
          {'label': 'Sandshrew (Alola) #27', 'value': '125 129 137'},
          {'label': 'Sandslash (Normal) #28', 'value': '182 175 181'},
          {'label': 'Sandslash (Alola) #28', 'value': '177 195 181'},
          {'label': 'Sceptile #254', 'value': '223 169 172'},
          {'label': 'Scizor #212', 'value': '236 181 172'},
          {'label': 'Scyther #123', 'value': '218 170 172'},
          {'label': 'Seadra #117', 'value': '187 156 146'},
          {'label': 'Seaking #119', 'value': '175 147 190'},
          {'label': 'Sealeo #364', 'value': '137 132 207'},
          {'label': 'Seedot #273', 'value': '71 77 120'},
          {'label': 'Seel #86', 'value': '85 121 163'},
          {'label': 'Sentret #161', 'value': '79 73 111'},
          {'label': 'Seviper #336', 'value': '196 118 177'},
          {'label': 'Sharpedo #319', 'value': '243 83 172'},
          {'label': 'Shaymin (Land) #492', 'value': '210 210 225'},
          {'label': 'Shaymin (Sky) #492', 'value': '261 166 225'},
          {'label': 'Shedinja #292', 'value': '153 73 1'},
          {'label': 'Shelgon #372', 'value': '172 155 163'},
          {'label': 'Shellder #90', 'value': '116 134 102'},
          {'label': 'Shellos (East_sea) #422', 'value': '103 105 183'},
          {'label': 'Shellos (West_sea) #422', 'value': '103 105 183'},
          {'label': 'Shieldon #410', 'value': '76 195 102'},
          {'label': 'Shiftry #275', 'value': '200 121 207'},
          {'label': 'Shinx #403', 'value': '117 64 128'},
          {'label': 'Shroomish #285', 'value': '74 110 155'},
          {'label': 'Shuckle #213', 'value': '17 396 85'},
          {'label': 'Shuppet #353', 'value': '138 65 127'},
          {'label': 'Silcoon #266', 'value': '60 77 137'},
          {'label': 'Skarmory #227', 'value': '148 226 163'},
          {'label': 'Skiploom #188', 'value': '91 120 146'},
          {'label': 'Skitty #300', 'value': '84 79 137'},
          {'label': 'Skorupi #451', 'value': '93 151 120'},
          {'label': 'Skuntank #435', 'value': '184 132 230'},
          {'label': 'Slaking #289', 'value': '290 166 284'},
          {'label': 'Slakoth #287', 'value': '104 92 155'},
          {'label': 'Slowbro #80', 'value': '177 180 216'},
          {'label': 'Slowking #199', 'value': '177 180 216'},
          {'label': 'Slowpoke #79', 'value': '109 98 207'},
          {'label': 'Slugma #218', 'value': '118 71 120'},
          {'label': 'Smeargle #235', 'value': '40 83 146'},
          {'label': 'Smoochum #238', 'value': '153 91 128'},
          {'label': 'Sneasel #215', 'value': '189 146 146'},
          {'label': 'Snorlax #143', 'value': '190 169 330'},
          {'label': 'Snorunt #361', 'value': '95 95 137'},
          {'label': 'Snover #459', 'value': '115 105 155'},
          {'label': 'Snubbull #209', 'value': '137 85 155'},
          {'label': 'Solrock #338', 'value': '178 153 207'},
          {'label': 'Spearow #21', 'value': '112 60 120'},
          {'label': 'Spheal #363', 'value': '95 90 172'},
          {'label': 'Spinarak #167', 'value': '105 73 120'},
          {'label': 'Spinda #327', 'value': '116 116 155'},
          {'label': 'Spiritomb #442', 'value': '169 199 137'},
          {'label': 'Spoink #325', 'value': '125 122 155'},
          {'label': 'Squirtle #7', 'value': '94 121 127'},
          {'label': 'Stantler #234', 'value': '192 131 177'},
          {'label': 'Staraptor #398', 'value': '234 140 198'},
          {'label': 'Staravia #397', 'value': '142 94 146'},
          {'label': 'Starly #396', 'value': '101 58 120'},
          {'label': 'Starmie #121', 'value': '210 184 155'},
          {'label': 'Staryu #120', 'value': '137 112 102'},
          {'label': 'Steelix #208', 'value': '148 272 181'},
          {'label': 'Stunky #434', 'value': '121 90 160'},
          {'label': 'Sudowoodo #185', 'value': '167 176 172'},
          {'label': 'Suicune #245', 'value': '180 235 225'},
          {'label': 'Sunflora #192', 'value': '185 135 181'},
          {'label': 'Sunkern #191', 'value': '55 55 102'},
          {'label': 'Surskit #283', 'value': '93 87 120'},
          {'label': 'Swablu #333', 'value': '76 132 128'},
          {'label': 'Swalot #317', 'value': '140 159 225'},
          {'label': 'Swampert #260', 'value': '208 175 225'},
          {'label': 'Swellow #277', 'value': '185 124 155'},
          {'label': 'Swinub #220', 'value': '90 69 137'},
          {'label': 'Taillow #276', 'value': '106 61 120'},
          {'label': 'Tangela #114', 'value': '183 169 163'},
          {'label': 'Tangrowth #465', 'value': '207 184 225'},
          {'label': 'Tauros #128', 'value': '198 183 181'},
          {'label': 'Teddiursa #216', 'value': '142 93 155'},
          {'label': 'Tentacool #72', 'value': '97 149 120'},
          {'label': 'Tentacruel #73', 'value': '166 209 190'},
          {'label': 'Togekiss #468', 'value': '225 217 198'},
          {'label': 'Togepi #175', 'value': '67 116 111'},
          {'label': 'Togetic #176', 'value': '139 181 146'},
          {'label': 'Torchic #255', 'value': '130 87 128'},
          {'label': 'Torkoal #324', 'value': '151 203 172'},
          {'label': 'Torterra #389', 'value': '202 188 216'},
          {'label': 'Totodile #158', 'value': '117 109 137'},
          {'label': 'Toxicroak #454', 'value': '211 133 195'},
          {'label': 'Trapinch #328', 'value': '162 78 128'},
          {'label': 'Treecko #252', 'value': '124 94 120'},
          {'label': 'Tropius #357', 'value': '136 163 223'},
          {'label': 'Turtwig #387', 'value': '119 110 146'},
          {'label': 'Typhlosion #157', 'value': '223 173 186'},
          {'label': 'Tyranitar #248', 'value': '251 207 225'},
          {'label': 'Tyrogue #236', 'value': '64 64 111'},
          {'label': 'Umbreon #197', 'value': '126 240 216'},
          {'label': 'Unown #201', 'value': '136 91 134'},
          {'label': 'Ursaring #217', 'value': '236 144 207'},
          {'label': 'Uxie #480', 'value': '156 270 181'},
          {'label': 'Vaporeon #134', 'value': '205 161 277'},
          {'label': 'Venomoth #49', 'value': '179 143 172'},
          {'label': 'Venonat #48', 'value': '100 100 155'},
          {'label': 'Venusaur #3', 'value': '198 189 190'},
          {'label': 'Vespiquen #416', 'value': '149 190 172'},
          {'label': 'Vibrava #329', 'value': '134 99 137'},
          {'label': 'Victreebel #71', 'value': '207 135 190'},
          {'label': 'Vigoroth #288', 'value': '159 145 190'},
          {'label': 'Vileplume #45', 'value': '202 167 181'},
          {'label': 'Volbeat #313', 'value': '143 166 163'},
          {'label': 'Voltorb #100', 'value': '109 111 120'},
          {'label': 'Vulpix (Alola) #37', 'value': '96 109 116'},
          {'label': 'Vulpix (Normal) #37', 'value': '96 109 116'},
          {'label': 'Wailmer #320', 'value': '136 68 277'},
          {'label': 'Wailord #321', 'value': '175 87 347'},
          {'label': 'Walrein #365', 'value': '182 176 242'},
          {'label': 'Wartortle #8', 'value': '126 155 153'},
          {'label': 'Weavile #461', 'value': '243 171 172'},
          {'label': 'Weedle #13', 'value': '63 50 120'},
          {'label': 'Weepinbell #70', 'value': '172 92 163'},
          {'label': 'Weezing #110', 'value': '174 197 163'},
          {'label': 'Whiscash #340', 'value': '151 141 242'},
          {'label': 'Whismur #293', 'value': '92 42 162'},
          {'label': 'Wigglytuff #40', 'value': '156 90 295'},
          {'label': 'Wingull #278', 'value': '106 61 120'},
          {'label': 'Wobbuffet #202', 'value': '60 106 382'},
          {'label': 'Wooper #194', 'value': '75 66 146'},
          {'label': 'Wormadam (Plant) #413', 'value': '141 180 155'},
          {'label': 'Wormadam (Sandy) #413', 'value': '141 180 155'},
          {'label': 'Wormadam (Trash) #413', 'value': '127 175 155'},
          {'label': 'Wurmple #265', 'value': '75 59 128'},
          {'label': 'Wynaut #360', 'value': '41 86 216'},
          {'label': 'Xatu #178', 'value': '192 146 163'},
          {'label': 'Yanma #193', 'value': '154 94 163'},
          {'label': 'Yanmega #469', 'value': '231 156 200'},
          {'label': 'Zangoose #335', 'value': '222 124 177'},
          {'label': 'Zapdos #145', 'value': '253 185 207'},
          {'label': 'Zigzagoon #263', 'value': '58 80 116'},
          {'label': 'Zubat #41', 'value': '83 73 120'}];
      $( function() {
        $( "#mon" ).autocomplete({
          source: availableMon,
          focus: function( event, ui ) {
            event.preventDefault();
            $("#mon").val(ui.item.label);
          },
          select: function(event, ui) {
            event.preventDefault();
            $("#mon").val(ui.item.value);
          },
        });
      });
    
      // check URL for inputs
      var url = decodeURI(window.location.href);
      if (url.indexOf('?') > -1)
      {
        // stuff before ? or after # is not what we are after, so get rid of it
        url = url.split('?')[1]; // keep right of '?'
        url = url.split('#')[0]; // keep left of '#'
        //console.log("Trimmed URL:"+url);

        // split our query string into its component parts
        var params = url.split('&');
        //console.log("Read params:"+JSON.stringify(params));

        // set page paramters from URL
        for (var i=0; i<params.length; i++)
        {
          // Ex: split 'minIVs=0' on '=', [0] is left 'minIVs' [1] is right '0'
          //console.log("Set '"+params[i].split('=')[0]+"' to '"+params[i].split('=')[1]+"'");
          // Fix weird safari bug not removing %20 properly
          if (params[i].split('=')[1].includes("%20"))
          {
            console.log("Browser likely Safari...found '%20' in '"+params[i]+"', removing...");
            document.getElementById(params[i].split('=')[0]).value = params[i].split('=')[1].replace(/%20/g, " ");
          } else {
            // Otherwise URL decode is working, proceed as normal...
            document.getElementById(params[i].split('=')[0]).value = params[i].split('=')[1];
          }
        }
        getFormData();
      }

      function getFormData(){
        
        // validate reCaptcha v3
        var tokenHolder;
        grecaptcha.ready(function() {
          grecaptcha.execute('6LfY-KYUAAAAAIYnP89WU5GWU-MMg_uy0z_7t9c2', {action: 'getFormData'}).then(function(token) {
            // pass the token to the backend script for verification
            //console.log("Token:"+token);
            
            //Make AJAX POST request to validate reCAPTCHA v3
            console.log("Validating reCAPTCHA...");
            $.ajax({
              type: "POST",
              url: "https://us-central1-sandbox-of-alex-gronbach-2.cloudfunctions.net/validateReCaptchaV3",
              data: {"token":token},
              success: function(data) {
                console.log("Success");
              },
              error: function(XMLHttpRequest, textStatus, errorThrown) {
                console.log("Error");
                //console.log("Dumping:"+JSON.stringify(XMLHttpRequest));
                //console.log(JSON.stringify(textStatus));
                //console.log(JSON.stringify(errorThrown));
                var html = "<table align=center><tr><th>ERROR</th></tr>";
                html+="</table>"; // finish building the whole table
                document.getElementById("box").innerHTML = html;
                return;
              }
            });
          })
        });
      
        // Get the User's Input from the form
        //console.log("Made it to getFormData\(\) !");
        var minIVs = document.getElementById('minIVs').value;
        //console.log("minIVs set to:"+minIVs);
        var league=document.getElementById('league').value;
        //console.log("league set to:"+league);
        // basestats contains [attack/defense/stamina]
        var basestats=document.getElementById('mon').value.split(" ", 3);
        //console.log("basestats set to:"+JSON.stringify(basestats)+" from:'"+document.getElementById('mon')+"'");
        var AttackIV=document.getElementById('AttackIV').value;
        //console.log("AttackIV set to:"+AttackIV);
        var DefenseIV=document.getElementById('DefenseIV').value;
        //console.log("DefenseIV set to:"+DefenseIV);
        var StaminaIV=document.getElementById('StaminaIV').value;
        //console.log("StaminaIV set to:"+StaminaIV);
        var minLvl=document.getElementById('minLvl').value;
        //console.log("minLvl set to:"+minLvl);
        var maxLvl=40//document.getElementById('maxLvl').value;
        //console.log("maxLvl set to:"+maxLvl);
        var tp=document.getElementById('TopRanks').value;
        //console.log("TopRanks set to:"+tp); // how many IVs to display
        
        // "Set" max stat variables to ensure shared URLs work
        //maxHP = document.getElementById('maxHP').value;
        //maxDef = document.getElementById('maxDef').value;
        //maxAtk = document.getElementById('maxAtk').value;
        //console.log("maxAtk set to:"+maxAtk+" maxDef set to:"+maxDef+" maxHP set to:"+maxHP);
        
        // append inputs to URL for sharing
        var url = window.location.href;   
        if (url.indexOf('?') > -1){
          // if we already have parameters in the URL, clear them and replace with these inputs
          url = url.split("?")[0]; // keep left of '?' (base URL)
        }
        // store paramters in URL for sharing these inputs
        url += encodeURI("?minIVs="+minIVs+"&league="+league+"&mon="+document.getElementById('mon').value+"&AttackIV="+AttackIV+"&DefenseIV="+DefenseIV+"&StaminaIV="+StaminaIV+"&minLvl="+minLvl+"&maxLvl="+maxLvl+"&TopRanks="+tp);//+"&maxAtk="+maxAtk+"&maxDef="+maxDef+"&maxHP="+maxHP);
        
        // Ensure current paramters are in the URL
        window.history.pushState(null, null, url);

        // Now call the actual search function with the User's Inputs
        var tpp = SearchPokeIVs(basestats[0], basestats[1], basestats[2], league, 4096, minIVs, minLvl, maxLvl);
        //console.log("TPP Calculated to be:"+JSON.stringify(tpp));
        
        // Call function to build table results
        buildResultsTable(basestats[0], basestats[1], basestats[2], AttackIV, DefenseIV, StaminaIV, league, tp, minIVs, tpp, minLvl, maxLvl);
        return;
      }
      
      function tieBreakByCP(tpp, rows, nextRow, curSMM, curAtk, curDef, curStm, curLvl, nexSMM, nexAtk, nexDef, nexStm, nexLvl, bsa, bsd, bss)
      {
        // Does the nextSMM even exist? && are they identical?
        if ((nexSMM > 0) && (curSMM == nexSMM))
        {
          //console.log ("Found a tie (row):"+rows+" curSMM:"+curSMM+"==nexSMM"+nexSMM);
          //console.log("b4--"+rows+": "+curSMM+"-"+curAtk+"-"+curDef+"-"+curStm+"-"+curLvl);
          //console.log("b4--"+nextRow+": "+nexSMM+"-"+nexAtk+"-"+nexDef+"-"+nexStm+"-"+nexLvl);
          var tempA = curAtk+parseFloat(bsa);
          var tempD = curDef+parseFloat(bsd);
          var tempS = curStm+parseFloat(bss);
          var tempCPM = parseFloat(cpm[curLvl]);
          var cp0 = Math.max(10, Math.floor(tempA* Math.sqrt(tempD)* Math.sqrt(tempS)* tempCPM* tempCPM / 10));
          //console.log("Calculated cp0:"+cp0+" with A:"+tempA+" D:"+tempD+" S:"+tempS+" CPM:"+tempCPM);
            
          var tempA = parseFloat(nexAtk+parseFloat(bsa));
          var tempD = parseFloat(nexDef+parseFloat(bsd));
          var tempS = parseFloat(nexStm+parseFloat(bss));
          var tempCPM = parseFloat(cpm[nexLvl]);
          var cp1 = Math.max(10, Math.floor(tempA* Math.sqrt(tempD)* Math.sqrt(tempS)* tempCPM* tempCPM / 10));
          //console.log("Calculated cp1:"+cp1+" with A:"+tempA+" D:"+tempD+" S:"+tempS+" CPM:"+tempCPM);
            
          //console.log("Comparing cp0:"+cp0+" to cp1:"+cp1);
          // need to swap these two so the higher cp gets ranked higher!
          if (cp0 < cp1)
          {
            //console.log("Swapping cp0:"+cp0+"at row:"+rows+" with cp1:"+cp1+"at row:"+nextRow);
            tpp[rows * 5 + 0] = nexSMM;
            tpp[rows * 5 + 1] = nexAtk;
            tpp[rows * 5 + 2] = nexDef;
            tpp[rows * 5 + 3] = nexStm;
            tpp[rows * 5 + 4] = nexLvl;
            tpp[nextRow * 5 + 0] = curSMM;
            tpp[nextRow * 5 + 1] = curAtk;
            tpp[nextRow * 5 + 2] = curDef;
            tpp[nextRow * 5 + 3] = curStm;
            tpp[nextRow * 5 + 4] = curLvl;
              
            //console.log("after--"+rows+": "+tpp[rows * 5 + 0]+"-"+tpp[rows * 5 + 1]+"-"+tpp[rows * 5 + 2]+"-"+tpp[rows * 5 + 3]+"-"+tpp[rows * 5 + 4]);
            //console.log("after--"+nextRow+": "+tpp[nextRow * 5 + 0]+"-"+tpp[nextRow * 5 + 1]+"-"+tpp[nextRow * 5 + 2]+"-"+tpp[nextRow * 5 + 3]+"-"+tpp[nextRow * 5 + 4]);
          }
        }
        return tpp;
      }
      
      function buildResultsTable(bsa, bsd, bss, aIV, dIV, sIV, league, tp, minIVs, tpp, minLvl, maxLvl)
      {
        // Determine how many rows we are going to print for header line
        for (var rows = 0; ((rows < tp) && (tpp[rows * 5 + 0])); rows++)
        {
          // Ensure we have the right maxStats
          if (((parseFloat(tpp[rows * 5 + 1])+parseFloat(bsa))*cpm[rows]) > maxAtk) {
            maxAtk = ((parseFloat(tpp[rows * 5 + 1])+parseFloat(bsa))*cpm[rows]).toFixed(1);
            //console.log("maxAtk updated to:"+maxAtk);
          }
          if (((parseFloat(tpp[rows * 5 + 2])+parseFloat(bsd))*cpm[rows]) > maxDef) {
            maxDef = ((parseFloat(tpp[rows * 5 + 2])+parseFloat(bsd))*cpm[rows]).toFixed(1);
            //console.log("maxDef updated to:"+maxDef);
          }
          if (((parseFloat(tpp[rows * 5 + 3])+parseFloat(bss))*cpm[rows]) > maxHP) {
            maxHP = Math.floor((parseFloat(tpp[rows * 5 + 3])+parseFloat(bss))*cpm[rows]);
            //console.log("maxHP updated to:"+maxHP);
          }
          tpp = tieBreakByCP(tpp, rows, parseFloat(rows+1), parseFloat(tpp[rows * 5 + 0]), parseFloat(tpp[rows * 5 + 1]), parseFloat(tpp[rows * 5 + 2]), parseFloat(tpp[rows * 5 + 3]), parseFloat(tpp[rows * 5 + 4]), parseFloat(tpp[(rows+1) * 5 + 0]), parseFloat(tpp[(rows+1) * 5 + 1]), parseFloat(tpp[(rows+1) * 5 + 2]), parseFloat(tpp[(rows+1) * 5 + 3]), parseFloat(tpp[(rows+1) * 5 + 4]), bsa, bsd, bss);
        }
        var html = "<p align=center>Your Top "+rows+" PvP Ranks are below <br><i>For reference: maximum Atk("+maxAtk+"), Def("+maxDef+"), HP("+maxHP+")</i></p>";
        var rank = tpp[0 * 5 + 0]; // pull best rank from highest smm result (in tpp)
        var i = tpp[0 * 5 + 4]; // calculate cpm offset from highest smm result
        
        // calcualte ideal PvP rank using attack + base stat attack * cpm
        var glA = (parseFloat(tpp[0 * 5 + 1])+parseFloat(bsa))*cpm[i];
        var glD = (parseFloat(tpp[0 * 5 + 2])+parseFloat(bsd))*cpm[i];
        var glS = (parseFloat(tpp[0 * 5 + 3])+parseFloat(bss))*cpm[i];
        var glst = (glA * glD * Math.floor(glS)); // convert stamina to HP for stat product
        var pcnt = glst;
        var pfct = glst;
        //console.log("BRT: pfct:"+pfct+" from uA:"+glA+" uD:"+glD+" uS:"+glS+", cpm["+i+"]:"+cpm[i]);

        // Compute combined (but not yet adjusted by cpm) stat totals
        var uA = parseFloat(aIV)+parseFloat(bsa);
        var uD = parseFloat(dIV)+parseFloat(bsd);
        var uS = parseFloat(sIV)+parseFloat(bss);
        //console.log("AIV:"+aIV+" DIV:"+dIV+" SIV:"+sIV);
        //console.log("bsa:"+bsa+" bsd:"+bsd+" bss:"+bss);
        
        // get user input smm to calculate rank
        var smm = getUserStatRank(bsa, bsd, bss, aIV, dIV, sIV, league, minIVs, minLvl, maxLvl);
        
        //console.log("Entering loop with user rank:"+rank+" != smm:"+smm);
        for (i=0; i<4096; i++)
        {
          // store each rank until smm == rank
          rank = tpp[i * 5 + 0];
          
          // watch out for duplicate smm ranks!
          if (rank == smm)
          {
            // ensure this is the right matching smm
            if ((aIV == tpp[i * 5 + 1]) && (dIV == tpp[i * 5 + 2]) && (sIV == tpp[i * 5 + 3]))
            {
              // found the correct rank! Store this for later calculations
              rank = i + 1; // offset by 1 to fix "0 rank"
              var level = tpp[i * 5 + 4]; // get raw half-level count for cpm
              break;
            }
          }
        }
        //console.log ("Retrieved level as:"+level);
        var cp = Math.max(10, Math.floor(uA * Math.sqrt(uD) * Math.sqrt(uS) * parseFloat(cpm[level]) * parseFloat(cpm[level]) / 10));
        
        // Finish calculating "battle stat" totals by adjusting for CPM now that we have level
        uA = uA*cpm[level];
        uD = uD*cpm[level];
        uS = uS*cpm[level];
        
        // Compute user stat perfection % compared to "perfect" PvP IVs (first slot in tpp)
        glst = (uA * uD * Math.floor(uS)); // convert stamina to HP for stat product
        //console.log("BRT: glst:"+glst+" from uA:"+uA+" uD:"+uD+" uS:"+uS+", cpm["+level+"]:"+cpm[level]);
        pcnt = (100 * glst / pfct).toFixed(3);
        
        // Convert half-level to actual level
        level = parseFloat(level / 2 + 1);
        
        // add table header rows to output
        html += "<table align=center><tr><th>Rank</th><th>Lvl</th><th>CP</th><th>Atk IV</th><th>Def IV</th><th>Sta IV</th><th>%</th><th>PvP Atk</th><th>PvP Def</th><th>PvP HP</th><th>Stat Prod</th></tr>";
        
        // control highlight of User Data row based on rank
        if (rank < 100) {
          html+="<tr bgcolor=\"#2BA32A\">"; // green for "good"
        } else if (rank < 1000) {
          html+="<tr bgcolor=\"#FF8C00\">"; // orange for "ok"
        } else {
          html+="<tr bgcolor=\"#B22222\">"; // red for "rubbish"
        }
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+rank+"</td>"; //Rank
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+level+"</td>"; //Level
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+cp+"</td>"; //Final CP
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+aIV+"</td>"; //Atk IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+dIV+"</td>"; //Def IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+sIV+"</td>"; //Sta IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+pcnt+"%"+"</td>"; //Perfection
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(uA.toFixed(1))+"</td>"; //GL Atk IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(uD.toFixed(1))+"</td>"; //GL Def IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+Math.floor(uS)+"</td>"; //GL Sta IV
        html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(glst.toFixed(0))+"</td>"; // Stat Product
        html+="</tr>";
        
        // Output Top "tp" number of PvP IVs, by generating each row of table individually in loop
        for (i = 0; ((i < tp) && (tpp[i * 5 + 0])); i++)
        {
          html+="<tr>";
          rank = i+1; // fix "rank 0" results by offsetting by 1
          // Get stats and level from tpp array
          aIV = tpp[i * 5 + 1];
          dIV = tpp[i * 5 + 2];
          sIV = tpp[i * 5 + 3];
          level = tpp[i * 5 + 4]; // keep at half-level for CPM calculations
          //console.log("Retrieved aIV:"+aIV+" dIV:"+dIV+" sIV:"+sIV+" level:"+level);
          
          // use level to convert to "battle stats" at PvP level
          glA = (parseFloat(aIV)+parseFloat(bsa))*cpm[level];
          glD = (parseFloat(dIV)+parseFloat(bsd))*cpm[level];
          glS = (parseFloat(sIV)+parseFloat(bss))*cpm[level];
          cp = Math.max(10, Math.floor((parseFloat(aIV)+parseFloat(bsa)) * Math.sqrt(parseFloat(dIV)+parseFloat(bsd)) * Math.sqrt(parseFloat(sIV)+parseFloat(bss)) * parseFloat(cpm[level]) * parseFloat(cpm[level]) / 10));
          
          // compute battle stat total for % calc
          glst = (glA * glD * Math.floor(glS));
          pcnt = (100 * glst / pfct).toFixed(3);
          
          // adjust to remove half-level offsets for output
          level = level / 2 + 1; 
          
          // Output this row as html to build table
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+rank+"</td>"; //Rank
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+level+"</td>"; //Level
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+cp+"</td>"; //Final CP
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+aIV+"</td>"; //Atk IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+dIV+"</td>"; //Def IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+sIV+"</td>"; //Sta IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+pcnt+"%"+"</td>"; //Perfection
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(glA.toFixed(1))+"</td>"; //GL Atk IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(glD.toFixed(1))+"</td>"; //GL Def IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+Math.floor(glS)+"</td>"; //GL Sta IV
          html+="<td style=\"text-align: center; vertical-align: middle;\">"+parseFloat(tpp[i * 5 + 0]).toFixed(0)+"</td>"; // Stat Product
          html+="</tr>";
        }
        html+="</table>"; // finish building the whole table
        document.getElementById("box").innerHTML = html;

        return;
      }

  function getUserStatRank(baseatk0, basedef0, basesta0, AttackIV, DefenseIV, StaminaIV, league, minIVs, minLvl, maxLvl)
  {
    // Need to double minLvl/maxLvl to account for half-level indexes in CPM list
    var adjMinLvl = (minLvl-1)*2;
    var adjMaxLvl = (maxLvl-1)*2;
    
    var L = adjMaxLvl;
    var cp;
    var glA = (parseFloat(baseatk0)+parseFloat(AttackIV));
    var glD = (parseFloat(basedef0)+parseFloat(DefenseIV));
    var glS = (parseFloat(basesta0)+parseFloat(StaminaIV));
    
    //console.log("GUSR: entering loop with glA:"+glA+" glD:"+glD+" glS:"+glS+" and cpm["+L+"]:"+cpm[L]+", league:"+league+" adjMaxLvl:"+adjMaxLvl+" adjMinLvl:"+adjMinLvl);
    // Determine the max level of User IVs
    for (L = adjMaxLvl; L >= adjMinLvl; L--)
    {
      cp = Math.max(10, Math.floor(glA * Math.sqrt(glD) * Math.sqrt(glS) * parseFloat(cpm[L]) * parseFloat(cpm[L]) / 10));
      if (cp <= league) break;
    }
    //console.log("GUSR: Exited loop with L:"+L+" and cp:"+cp);
    
    glA = glA*cpm[L];
    glD = glD*cpm[L];
    glS = glS*cpm[L];
      
    // Recalculate smm using IV inputs to find rank in tpp
    return (glA * glD * Math.floor(glS));
    }

  function SearchPokeIVs(baseatk0, basedef0, basesta0, league, numOfIVs, minIVs, minLvl, maxLvl)
  {
    // Need to double minLvl/maxLvl to account for half-level indexes in CPM list
    var adjMinLvl = (minLvl-1)*2;
    var adjMaxLvl = (maxLvl-1)*2;
    
    var ba0 = baseatk0 // base attack
    var bd0 = basedef0 // base defense
    var bs0 = basesta0 // base stamina
    //var league = league // GL or UL CP cutoff
    var tp = numOfIVs // total IVs to find
    //console.log("SPIV: Got ba0:"+ba0+" bd0:"+bd0+" bs0:"+bs0+" league:"+league+" tp:"+tp+" minIVs:"+minIVs+" adjMinLvl:"+adjMinLvl+" adjMaxLvl:"+adjMaxLvl);
    var tq = 5 * tp // total number of nested IV combinations to store: smm (rank)/A/D/S/L
    var cp = 4000
    var smm = 1000
    var n = 0
    var n5 = 5 * n
    // tpp: nested sorted Array of Top PvP IVs
    // smm | Attack | Defense | Stamina | Level
    var tpp = new Array(tq+6).join('0').split('').map(parseFloat)
    // Output tpp as [0, 0, 0, ... 0, 0] tq+5 times
    // 5 slot buffer is for merging in next best IVs 

    // Declare Loop Variables
    var a = 15; // Pokémon attack counter
    var s = 15; // Pokémon stamina counter
    var d = 15; // Pokémon defense counter
    var L = adjMaxLvl; // Pokémon level counter
    var glA;
    var glD;
    var glS;

    // calculate CPs w/various Attack (a), Stamina (s), Defense (d) IVs across levels (L), with CPM look up array
    // 4 Loops run 16 x 16 x 16 x 79 = 323,583 for IVs 0-15 and levels 0-40 (w/half levels)
    for (a = 15; a >= minIVs; a--) 
    {
      for (s = 15; s >= minIVs; s--)
      {
        for (d = 15; d >= minIVs; d--)
        {
          cp = league+1; // reset cp variable
          for (L = adjMaxLvl; ((L >= adjMinLvl) && (cp > league)); L--)
          {
            glA = (parseFloat(ba0)+parseFloat(a));
            glD = (parseFloat(bd0)+parseFloat(d));
            glS = (parseFloat(bs0)+parseFloat(s));
            cp = Math.max(10, Math.floor(glA * Math.sqrt(glD) * Math.sqrt(glS) * parseFloat(cpm[L]) * parseFloat(cpm[L]) /10));
            // check if the calculated cp is eligible for the chosen league (1500 or 2500 max)
            //console.log("cp:"+cp+" with glA:"+glA+" glD:"+glD+" glS:"+glS+" and cpm["+L+"]:"+cpm[L]+", league:"+league);
            if (cp <= league)
            {
              // stat product used to rank IVs
              glA = glA*cpm[L];
              glD = glD*cpm[L];
              glS = glS*cpm[L];
              smm = parseFloat(glA * glD * Math.floor(glS)); // convert stamina to HP for stat product
              
              // check this new smm(rank) against the lowest smm stored in tpp so far
              if (smm >= tpp[tq])
              {
                //console.log("SPIV: Storing...");
                // found a new best IV set! Storing...
                for (n = 0; n < tp; n++) 
                {

                  n5 = 5 * n // get old smm index
                  // Is new smm better than stored smm?
                  if (smm >= tpp[n5])
                  {
                    // Insert new high rank smm/stats/level at this index
                    tpp.splice(n5, 0, smm, a, d, s, L)
                    // Did we save too many Top IVs?
                    if (tpp.length > tq)
                    {
                      // remove old highest smm/stats/level
                      for (var i = tpp.length - tq - 5 ; i > 0; i--)
                      {
                        tpp.pop()
                      }
                    }
                    // after insertion, stop searching tpp
                    break;
                  }
                }
              }
              //else {console.log("Skipping over...");}
            } // Skip next iterations of loop as we already found the max cp
    }}}} // end of quad loop
    // window.addEventListener('load', calculate, false);
    // pass nested Array of Top IVs 
    // calculate(tpp);
  //console.log("SPIV: Finished! TPP is:");
  //console.log(JSON.stringify(tpp));
  return tpp;
  } // end of SearchPokeIVs()
 

</script>
</body></div></div>
</html>
