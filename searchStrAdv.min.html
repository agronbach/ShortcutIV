<!DOCTYPE html><html lang="en"><head><!-- Global site tag (gtag.js) - Google Analytics -- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145799979-1"></script> <script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'UA-145799979-1'); </script> <link rel="preload" href="https://shortcutIV.com/includes/baseSiteStyling.css" as="style"> <link rel="preload" href="https://shortcutIV.com/includes/httpsRedirect.js" as="script"> <link rel="preload" href="https://shortcutIV.com/includes/escapedFooter.js" as="script"> <link rel="preload" href="https://shortcutIV.com/includes/sortingHat.js" as="script"> <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" as="style"> <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js" as="script"> <link rel="preload" href="https://shortcutIV.com/includes/pokeList.js" as="script"> <title>ShortcutIV - PvP Search Strings</title> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="Pok&eacute;mon Go&trade; PvP search string generator to find your best (or trash the rest). By copy+pasting these strings into PoGo, you can quicky figure out what to power up and what to send to Professor Willow!"/> <script async src="https://shortcutIV.com/includes/httpsRedirect.js"></script> <link rel="apple-touch-icon" sizes="57x57" href="/favIcon/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/favIcon/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/favIcon/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/favIcon/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/favIcon/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/favIcon/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/favIcon/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/favIcon/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/favIcon/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/favIcon/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favIcon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/favIcon/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favIcon/favicon-16x16.png"> <link rel="manifest" href="/favIcon/manifest.json"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <link rel="stylesheet" href="https://shortcutIV.com/includes/baseSiteStyling.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css"> <script src="https://www.google.com/recaptcha/api.js?render=6LfY-KYUAAAAAIYnP89WU5GWU-MMg_uy0z_7t9c2"></script> <style>#leagueRanks{display:none;}input[type=number]{width: 42px;}</style></head><body onload="checkURI()"> <header> <ul class="header"> <li class="dropdown active"> <a href="javascript:void(0)" class="dropbtn active">PvP IVs</a> <div class="dropdown-content"> <a href="/">Rankings</a> <a href="/searchStr.html" class="active">Search Strings</a> </div></li><li class="dropdown"> <a href="javascript:void(0)" class="dropbtn">Typing</a> <div class="dropdown-content"> <a href="/typeLookup.html">Chart</a> <a href="/typeQuiz.html">Quiz</a> </div></li><li class="header" style="float:right"><a href="/about.html">About</a></li></ul> </header> <section> <br/> <input id="pokeList" onfocus="this.value=''" placeholder="Final Mon"/> <label> Top # Ranks: <input type="number" value="10" id="limit" min="1" max="4096" oninput="start()"> </label> <br/> <label>League:<select id="league" onfocus="saveLast()" oninput="start()"> <option value="1500">Great League</option> <option value="2500">Ultra League</option> <option value="5000">Master League</option> <option value="All">All Leagues</option></select> </label> <label>Trash String:<input id="trash" type="checkbox" oninput="start()"></label><br/> <div id="leagueRanks"><div id="evoName[1]" style="display: inline-block;"> </div>GL:<input type="number" value="10" id="GLlimit[1]" min="1" max="4096" oninput="updateRank()"> UL:<input type="number" value="10" id="ULlimit[1]" min="1" max="4096" oninput="updateRank()"> ML:<input type="number" value="10" id="MLlimit[1]" min="1" max="4096" oninput="updateRank()"> </div><label>Include <div id="midLimits" style="display: inline-block;">Middle Evolution:<input id="otherEvo[2]" type="checkbox" oninput="addBoxes()"></div></label><br/> <br/><br/> <textarea id="output" rows="10" style="width: 100%; height: 50%;" onclick="autocopy(this)"></textarea> <div id="outputSummaryBox"></div><div id="feedbackBox"></div><script src="https://shortcutIV.com/includes/escapedFooter.js"></script> <script src="https://shortcutIV.com/includes/sortingHat.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script> <script src="https://shortcutIV.com/includes/pokeList.js"></script><script>/* define Awesomeplete list https://leaverou.github.io/awesomplete/ */ var input=document.getElementById("pokeList"); var selected=undefined; var otherEvos=new Array(2).fill(0); var canonicalLink=true; var lastLeague; var awesomplete=new Awesomplete(input,{list: pokeList, /* insert label instead of value into the input */ replace: function(suggestion){this.input.value=suggestion.label; selected=suggestion.label; document.getElementById('evoName[1]').innerHTML=selected; otherEvos=new Array(2).fill(0); start();}}); /* end Awesomeplete definitions https://leaverou.github.io/awesomplete/ */ var cpm=[0.094, 0.1351374318, 0.16639787, 0.192650919, 0.21573247, 0.2365726613, 0.25572005, 0.2735303812, 0.29024988, 0.3060573775, 0.3210876, 0.3354450362, 0.34921268, 0.3624577511, 0.3752356, 0.387592416, 0.39956728, 0.4111935514, 0.4225, 0.4329264091, 0.44310755, 0.4530599591, 0.4627984, 0.472336093, 0.48168495, 0.4908558003, 0.49985844, 0.508701765, 0.51739395, 0.5259425113, 0.5343543, 0.5426357375, 0.5507927, 0.5588305862, 0.5667545, 0.5745691333, 0.5822789, 0.5898879072, 0.5974, 0.6048236651, 0.6121573, 0.6194041216, 0.6265671, 0.6336491432, 0.64065295, 0.6475809666, 0.65443563, 0.6612192524, 0.667934, 0.6745818959, 0.6811649, 0.6876849038, 0.69414365, 0.70054287, 0.7068842, 0.7131691091, 0.7193991, 0.7255756136, 0.7317, 0.7347410093, 0.7377695, 0.7407855938, 0.74378943, 0.7467812109, 0.74976104, 0.7527290867, 0.7556855, 0.7586303683, 0.76156384, 0.7644860647, 0.76739717, 0.7702972656, 0.7731865, 0.7760649616, 0.77893275, 0.7817900548, 0.784637, 0.7874736075, 0.7903]; function addBoxes(){checkEvoInputs(otherEvos.length-1, true); start();}function checkEvoInputs(i, evo){var evoName="Middle Evolution"; console.log("chEvoI: otherEvos.length:"+otherEvos.length); console.log("chEvoI: otherEvos:"+JSON.stringify(otherEvos)); if ((otherEvos) && (otherEvos.length > 2)){evoName=otherEvos[i];}else if (!(evo)){evoName="<i>No Additional Evolutions Found</i>";}/* ensure that we persist the old values (if any) when we update the mon name html */ var glVal=(document.getElementById('GLlimit['+i+']')) ? document.getElementById('GLlimit['+i+']').value : 10; var ulVal=(document.getElementById('ULlimit['+i+']')) ? document.getElementById('ULlimit['+i+']').value : 10; var mlVal=(document.getElementById('MLlimit['+i+']')) ? document.getElementById('MLlimit['+i+']').value : 10; console.log("Obtained glVal:"+glVal+", ulVal:"+ulVal+", mlVal:"+mlVal); console.log("chEvoI: otherEvo["+i+"]..."); if ((document.getElementById('otherEvo['+i+']')) && (document.getElementById('otherEvo['+i+']').checked)){if (document.getElementById('league').value=="All"){document.getElementById('midLimits').innerHTML=evoName+": <input id='otherEvo["+i+"]' type='checkbox' oninput='addBoxes()'> <div id='evoName["+i+"]' style='display: inline-block;'></div>GL:<input type='number' value='"+glVal+"' id='GLlimit["+i+"]' min='1' max='4096' oninput='start()'>UL:<input type='number' value='"+ulVal+"' id='ULlimit["+i+"]' min='1' max='4096' oninput='start()'>ML:<input type='number' value='"+mlVal+"' id='MLlimit["+i+"]' min='1' max='4096' oninput='start()'>";}else{document.getElementById('midLimits').innerHTML=evoName+": <input id='otherEvo["+i+"]' type='checkbox' oninput='addBoxes()'> <div id='evoName["+i+"]' style='display: inline-block;'></div>Top # Ranks:<input type='number' value='"+glVal+"' id='GLlimit["+i+"]' min='1' max='4096' oninput='start()'>";}document.getElementById('otherEvo['+i+']').checked=true;}else{document.getElementById('midLimits').innerHTML=evoName+": <input id='otherEvo["+i+"]' type='checkbox' oninput='addBoxes()'>"; document.getElementById('otherEvo['+i+']').checked=false;}}function updateRank(){switch (lastLeague){case "1500": document.getElementById('limit').value=document.getElementById('GLlimit[1]').value; break; case "2500": document.getElementById('limit').value=document.getElementById('ULlimit[1]').value; break; case "5000": document.getElementById('limit').value=document.getElementById('MLlimit[1]').value; break;}/*document.getElementById('limit').value=document.getElementById('GLlimit[1]').value;*/ start();}function checkURI(){var URL=window.location.href.split("?")[1]; /* URL="mon=Gyarados&r=169&cp=2500&o=00000&l=ko"; */ if (URL){URL=decodeURI(URL); /*console.log("Read URL as: "+URL); */ var values=URL.split("&"); /*console.log("Values array as: "+JSON.stringify(values)); */ for (var i=0; i<values.length; i++){switch (values[i].split("=")[0]){case "mon": /*selected=values[i].split("=")[1]; awesomplete.input.value=selected;*/ awesomplete.input.value=values[i].split("=")[1]; break; case "r": var rStr=(values[i].split("=")[1]).split("-"); console.log("rStr:"+rStr); if (rStr.length > 1){document.getElementById('GLlimit[1]').value=rStr[0]; document.getElementById('ULlimit[1]').value=rStr[1]; document.getElementById('MLlimit[1]').value=rStr[2];}else{document.getElementById('limit').value=rStr;}break; case "cp": document.getElementById('league').value=values[i].split("=")[1]; break; case "o": var options=(''+values[i].split("=")[1]); if (options[0]==1){document.getElementById('trash').checked=true;}else{document.getElementById('trash').checked=false;}if (options[1]==1){document.getElementById('onlyZero').checked=true;}else{document.getElementById('onlyZero').checked=false;}if (options[2]==1){document.getElementById('hundo').checked=true;}else{document.getElementById('hundo').checked=false;}if (options[3]==1){document.getElementById('zero').checked=true;}else{document.getElementById('zero').checked=false;}if (options[4]==1){document.getElementById('base').checked=true;}else{document.getElementById('base').checked=false;}if (options[5]==1){document.getElementById('baby').checked=true;}else{document.getElementById('baby').checked=false;}if (options[6]==1){document.getElementById('short').checked=true;}else{document.getElementById('short').checked=false;}if (options[7]==1){document.getElementById('otherEvo[2]').checked=true;}else{document.getElementById('middle').checked=false;}break; case "l": var lang=document.getElementById('lang'); var languages=lang.options.length; for (var j=0; j<languages; j++){if (lang.options[j].value.split(",")[0]==values[i].split("=")[1]){lang.options[j].selected=true; break;}}break;}}start(); return true;}else{console.log("No inputs detected, awaiting user input"); return false;}}function start(){if (((document.getElementById('league').value=="All") && (getComputedStyle(document.getElementById("leagueRanks"), null).display !="block")) || ((getComputedStyle(document.getElementById("leagueRanks"), null).display=="block") && (document.getElementById('league').value !="All"))){/* https://stackoverflow.com/questions/18353574/how-to-show-hide-div-on-selection-of-any-drop-down-value */ /* https://stackoverflow.com/questions/4866229/check-element-css-display-with-javascript */ document.getElementById("leagueRanks").style.display=(getComputedStyle(document.getElementById("leagueRanks"), null).display=="block") ? "none":"block"; /* if we are now displaying leagueRanks div, ensure new rank box aligns with lastLeague selected */ if (document.getElementById('league').value=="All"){switch (lastLeague){case "1500": document.getElementById('GLlimit[1]').value=document.getElementById('limit').value; break; case "2500": document.getElementById('ULlimit[1]').value=document.getElementById('limit').value; break; case "5000": document.getElementById('MLlimit[1]').value=document.getElementById('limit').value; break;}}else{document.getElementById('GLlimit[1]').value=10; document.getElementById('ULlimit[1]').value=10; document.getElementById('MLlimit[1]').value=10;}checkEvoInputs(otherEvos.length, true);}/* exit if we haven't selected a mon yet */ if ((awesomplete.suggestions===undefined) && (selected===undefined)){console.log("No Pok&eacute;mon found by start(), received:'"+awesomplete.suggestions+"' and '"+selected+"'"); return;}else{if (selected===undefined){console.log("Invalid input detected:'"+awesomplete.suggestions+"' and '"+selected+"'"); return;}else{console.log("start: Found mon in both:'"+awesomplete.suggestions+"' and '"+selected+"'");}}var mon='', i; /* need to ensure we have the right mon selected */ if (awesomplete.suggestions !==undefined){for (i=0; i<awesomplete.suggestions.length; i++){if (selected==awesomplete.suggestions[i].label){/*console.log("mon set to selected==awesomplete.suggestions["+i+"].label:"+awesomplete.suggestions[i].label) */ mon=awesomplete.suggestions[i].value;}}}else{/* need to ensure we have the right mon selected */ var listLen=awesomplete.options.list.length; for (i=0; i<listLen; i++){if (selected==awesomplete.options.list[i].label){/*console.log("mon set to selected==awesomplete.suggestions["+i+"].label:"+awesomplete.suggestions[i].label) */ mon=awesomplete.options.list[i].value;}}}console.log("start(): 'mon' received as:"+JSON.stringify(mon)); var value=mon.split(','); console.log("value set to:"+JSON.stringify(value)); var output=document.getElementById('output'); var baseVals=new Array(5).fill(0); var midVals=new Array(5).fill(0); baseVals[0]=document.getElementById('base').checked; /* ignore base for Hitmons */ if ((baseVals[0]) && (!(['106', '107', '237'].includes(value[0])))){/*console.log("Finding base evo, (['106', '107', '237'].includes(value):"+(['106', '107', '237'].includes(value[0]))) */ var baseID=10000; var midID=10000; baseVals[0]=value[0]; baseID=value[0].split("&")[0]; console.log("Using baseVals[0] of:"+baseVals[0]); console.log("Using baseID of:"+baseID); for (i=4; i<value.length; i++){if (value[i].indexOf("&") > 0){/*console.log("Found an '&' in an evolved form ("+value[i]+")!"); */ /* skip baby forms unless checked (baby=true) */ if ((value[i].split("&")[1]==="eggsonly") && (!baby)) continue; if (baseID/1 > value[i].split("&")[0]/1){baseVals[0]=value[i]; baseID=value[i].split("&")[0];}}/* find base evolution */ if (baseID/1 > value[i]/1){baseVals[0]=value[i]; baseID=value[i]; console.log("Updated base evo to "+baseVals[0]);}else if ((value[i]/1 > baseVals[0]/1) && (midID/1 > value[i]/1)){midID=value[i]; midVals[0]=value[i]; console.log("Updated middle evo to "+midVals[0]);}}console.log("Found base evo to be "+baseVals[0]); console.log("Found middle evo to be "+midVals[0]);}else{/* if we aren't using base evo, use the select mon's ID */ console.log("Skipping finding base evo, (['106', '107', '237'].includes(value):"+(['106', '107', '237'].includes(value[0]))); baseVals[0]=value[0];}var baby=document.getElementById('baby').checked; if (baby){baby=value[0]; for (i=4; i<value.length; i++){if (value[i].indexOf("&") > 0){if (value[i].split("&")[1]==="eggsonly"){/*console.log("Found baby form! "+value[i]); */ baseVals[0]=value[i]; break;}}}/*console.log("Overwrote base evo with baby form:"+baseVals[0]); */}/* foundBase boolean fixes same dexNum forms displaying incorrectly (Rotom) */ var foundBase=false; var foundMid=false; console.log("midVals[0]:"+midVals[0]); /* get base stats of whatever form we are outputting string for */ for (i=0; i < awesomplete.options.list.length; i++){awesomplete.options.list[i].value.split(',')[0]; if (baseVals[0]===awesomplete.options.list[i].value.split(',')[0]){console.log("Found base("+baseVals[0]+":"+awesomplete.options.list[i].label+") at i:("+i+")"); if (foundBase){if (selected !==awesomplete.options.list[i].label){console.log("No base match: selected("+selected+") !="+awesomplete.options.list[i].label+" at i:("+i+")"); continue;}}baseVals[4]=awesomplete.options.list[i].label; baseVals[1]=awesomplete.options.list[i].value.split(',')[1]; baseVals[2]=awesomplete.options.list[i].value.split(',')[2]; baseVals[3]=awesomplete.options.list[i].value.split(',')[3]; foundBase=true;}if ((midVals[0]) && (midVals[0]===awesomplete.options.list[i].value.split(',')[0])){console.log("Found middle("+midVals[0]+":"+awesomplete.options.list[i].label+") at i:("+i+")"); if (foundMid){if (selected !==awesomplete.options.list[i].label){console.log("No middle match: selected("+selected+") !="+awesomplete.options.list[i].label+" at i:("+i+")"); continue;}}midVals[4]=awesomplete.options.list[i].label; otherEvos.push(awesomplete.options.list[i].label); midVals[1]=awesomplete.options.list[i].value.split(',')[1]; midVals[2]=awesomplete.options.list[i].value.split(',')[2]; midVals[3]=awesomplete.options.list[i].value.split(',')[3]; foundMid=true;}}/* store final evo in value to match baseVal and midVal format */ value[4]=selected; /* update specific mon name in middle evo checkbox for user */ checkEvoInputs(2, midVals[4]); if (!(document.getElementById('otherEvo[2]').checked)){/* clear boolean so this evo isn't included later on */ midVals[0]=document.getElementById('otherEvo[2]').checked;}var league=document.getElementById('league').value; var limit=document.getElementById('limit').value; var trash=document.getElementById('trash').checked; var hundo=document.getElementById('hundo').checked; var zero=document.getElementById('zero').checked; var onlyZero=document.getElementById('onlyZero').checked; var short=document.getElementById('short').checked; var lang=document.getElementById('lang').value.split(','); var cpstr=lang[1], hpstr=lang[2]; /* validate reCaptcha v3 */ /* code reference: https://www.simoahava.com/analytics/improve-google-analytics-bot-detection-with-recaptcha/ */ grecaptcha.ready(function(){grecaptcha.execute('6LfY-KYUAAAAAIYnP89WU5GWU-MMg_uy0z_7t9c2',{action: 'searchStr'}).then(function(token){/* Make xhr POST request to validate reCAPTCHA v3 */ console.log("Validating reCAPTCHA..."); var xhr=new XMLHttpRequest(); xhr.onload=function(){if ((xhr.response !=='noChange') && (xhr.response==='Success')){console.log("Success!");}else if (xhr.response==='Error'){output.value="ERROR"; console.log("Error! xhr.status:"+xhr.status+" xhr.responseText:"+JSON.stringify(xhr.responseText)); return false;}else{console.log("Unknown Response! xhr.status:"+xhr.status+" xhr.responseText:"+JSON.stringify(xhr.responseText));}}; xhr.open('POST', 'https://us-central1-sandbox-of-alex-gronbach-2.cloudfunctions.net/validateReCaptchaV3', true); xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); /* xhr.send('token=ERROR'); */ xhr.send('token=' + token + '&bqInsert=' + false + '&request=' + null);});}); /* build binary encoding of settings */ var binary=""; var calcOut; var rStr=limit; if (trash){binary="1";}else{binary="0";}if (onlyZero){binary +="1";}else{binary +="0";}if (hundo){binary +="1";}else{binary +="0";}if (zero){binary +="1";}else{binary +="0";}if (document.getElementById('base').checked){binary +="1";}else{binary +="0";}if (document.getElementById('baby').checked){binary +="1";}else{binary +="0";}if (short){binary +="1";}else{binary +="0";}if (document.getElementById('otherEvo[2]').checked){binary +="1";}else{binary +="0";}if (league=="All"){rStr=document.getElementById('GLlimit[1]').value + "-" + document.getElementById('ULlimit[1]').value + "-" + document.getElementById('MLlimit[1]').value;}/*console.log("Binary:"+binary); */ /* output the user's request! */ outputStr(value, baseVals, midVals, rStr, trash, hundo, zero, onlyZero, short, league, binary, output, lang[1], lang[2]); /* update the URL with search parameters */ var uri=window.location.href.split("?")[0]; uri=encodeURI(uri + "?mon="+selected+"&r="+rStr+"&cp="+league+"&o="+binary+"&l="+document.getElementById('lang').value.split(',')[0]); /*console.log("URI:"+uri); */ var newTitle="ShortcutIV - PvP Search Strings - " + "Rank " + rStr + " " + selected + " ("+league+")"; window.history.pushState(null, newTitle, uri); if (canonicalLink){/* https://stackoverflow.com/questions/13735247/changing-the-href-of-a-link-tag-using-javascript */ /* <link rel="canonical" href="https://example.com/dresses/green-dresses"/> */ var newLink=document.createElement('link'); newLink.rel="canonical"; newLink.href="https://shortcutiv.com/searchStr.html"; document.getElementsByTagName("head")[0].appendChild(newLink); /*console.log("Added newLink("+newLink+") to head:"+document.getElementsByTagName('head')); */ canonicalLink=false;}return true;}function getRanks(evoVals, limit, trash, hundo, zero, onlyZero, league){/*var evoVals=[]; evoVals[0]=baseVals; evoVals[1]=finalVals; evoVals[2]=midVals;*/ console.log("Received evoVals:"+JSON.stringify(evoVals)); var message="String ", numRanks=limit, rKeys, GLkeys, ULkeys, MLkeys, i, j; var GLranks={}, ULranks={}, MLranks={}; for (i=0; i<evoVals.length; i++){console.log("Loop #"+i+": evoVals["+i+"]:"+JSON.stringify(evoVals[i])); switch(i){case 0: /* base mon stats */ if ((trash) && (!onlyZero)){message +="trashes all "+evoVals[i][4]+" except "; if (!hundo){message +="perfect IV (15/15/15) and ";}if (!zero){message +="zero IV (0/0/0) and ";}}else{message +="finds "+evoVals[i][4]+" as ";}break; case 1: /* final evolution */ evoVals[i].push(Math.max(10, Math.floor((evoVals[i][1]/1 + 15) * Math.sqrt(evoVals[i][2]/1 + 15) * Math.sqrt(evoVals[i][3]/1 + 15) * cpm[(40 - 1)*2] * cpm[(40 - 1)*2] / 10))); if (league !="All"){GLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), league, 0, 0, 40); message +="Top "+numRanks+ " PvP "+evoVals[i][4]; rKeys=Object.keys(GLranks); for (j=numRanks; j<rKeys.length; j++){delete GLranks[rKeys[j]];}evoVals[i].push(GLranks); evoVals[i][6].numRanks=numRanks;}else{/* Run Great League Calculations first, always need to be done for all Leagues */ GLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 1500, 0, 0, 40); message +="PvP "+evoVals[i][4]+" for Top "+document.getElementById('GLlimit['+i+']').value+ " GL"; GLkeys=Object.keys(GLranks); for (j=document.getElementById('GLlimit['+i+']').value/1; j<GLkeys.length; j++){delete GLranks[GLkeys[j]];}numRanks=document.getElementById('GLlimit['+i+']').value/1; if (evoVals[i][5]/1 > 1500){ULranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 2500, 0, 0, 40); message +=", and Top "+document.getElementById('ULlimit['+i+']').value+ " UL"; ULkeys=Object.keys(ULranks); for (j=document.getElementById('ULlimit['+i+']').value/1; j<ULkeys.length; j++){delete ULranks[ULkeys[j]];}numRanks +=document.getElementById('ULlimit['+i+']').value/1;}if (evoVals[i][5]/1 > 2500){MLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 5000, 0, 0, 40); message +=", and Top "+document.getElementById('MLlimit['+i+']').value+ " ML"; MLkeys=Object.keys(MLranks); for (j=document.getElementById('MLlimit['+i+']').value/1; j<MLkeys.length; j++){delete MLranks[MLkeys[j]];}numRanks +=document.getElementById('MLlimit['+i+']').value/1;}evoVals[i].push({...GLranks, ...ULranks, ...MLranks}); evoVals[i][6].numRanks=numRanks;}console.log("Finished case 1 successfully!"); break; default: /* any additional evos */ if (evoVals[i][0]){evoVals[i].push(Math.max(10, Math.floor((evoVals[i][1]/1 + 15) * Math.sqrt(evoVals[i][2]/1 + 15) * Math.sqrt(evoVals[i][3]/1 + 15) * cpm[(40 - 1)*2] * cpm[(40 - 1)*2] / 10))); if (league !="All"){GLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), league, 0, 0, 40); message +=" and PvP "+evoVals[i][4]; rKeys=Object.keys(GLranks); for (j=numRanks; j<rKeys.length; j++){delete GLranks[rKeys[j]];}evoVals[i].push(GLranks); /* merge into existing array and update total numRanks */ evoVals[1][6]={...evoVals[1][6], ...evoVals[i][6]}; evoVals[1][6].numRanks=evoVals[1][6].numRanks/1 + numRanks/1;}else{/* Run Great League Calculations first, always need to be done for all Leagues */ GLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 1500, 0, 0, 40); message +=",<br>and PvP "+evoVals[i][4]+" for Top "+document.getElementById('GLlimit['+i+']').value+ " GL"; GLkeys=Object.keys(GLranks); for (j=document.getElementById('GLlimit['+i+']').value/1; j<GLkeys.length; j++){delete GLranks[GLkeys[j]];}numRanks=document.getElementById('GLlimit['+i+']').value/1; if (evoVals[i][5]/1 > 1500){ULranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 2500, 0, 0, 40); message +=", and Top "+document.getElementById('ULlimit['+i+']').value+ " UL"; ULkeys=Object.keys(ULranks); for (j=document.getElementById('ULlimit['+i+']').value/1; j<ULkeys.length; j++){delete ULranks[ULkeys[j]];}numRanks +=document.getElementById('ULlimit['+i+']').value/1;}if (evoVals[i][5]/1 > 2500){MLranks=calculate(parseInt(evoVals[i][1]), parseInt(evoVals[i][2]), parseInt(evoVals[i][3]), 5000, 0, 0, 40); message +=", and Top "+document.getElementById('MLlimit['+i+']').value+ " ML"; MLkeys=Object.keys(MLranks); for (j=document.getElementById('MLlimit['+i+']').value/1; j<MLkeys.length; j++){delete MLranks[MLkeys[j]];}numRanks +=document.getElementById('MLlimit['+i+']').value/1;}evoVals[i].push({...GLranks, ...ULranks, ...MLranks}); evoVals[i][6].numRanks=numRanks;}}else{console.log("default: skipping evo: "+evoVals[i][4]+"...");}break;}}/*console.log("Returning evoVals:"+JSON.stringify(evoVals));*/ document.getElementById('outputSummaryBox').innerHTML="<p>"+message+"</p>"; return evoVals;}function outputStr(finalVals, baseVals, midVals, limit, trash, hundo, zero, onlyZero, short, league, binary, output, cpstr, hpstr){/* baseVals[0]: id, baseVals[1]: baseatk, baseVals[2]: basedef: baseVals[3]: basesta, baseVals[4]: mon */ console.log("outputStr: finalVals[0]:"+finalVals[0]+", finalVals[1]:"+finalVals[1]+", finalVals[2]:"+finalVals[2]+", finalVals[3]:"+finalVals[3]+", finalVals[4]:"+finalVals[4]+", baseVals[0]:"+baseVals[0]+", baseVals[1]:"+baseVals[1]+", baseVals[2]:"+baseVals[2]+", baseVals[3]:"+baseVals[3]+", baseVals[4]:"+baseVals[4]+", midVals[0]:"+midVals[0]+", midVals[1]:"+midVals[1]+", midVals[2]:"+midVals[2]+", midVals[3]:"+midVals[3]+", midVals[4]:"+midVals[4]+", limit:"+limit+", trash:"+trash+", hundo:"+hundo+", zero:"+zero+", onlyZero:"+onlyZero+", league:"+league+", cpstr:"+cpstr+", hpstr:"+hpstr); var evoVals=[]; evoVals[0]=baseVals; evoVals[1]=finalVals.slice(0, 5); /*remove extra evo dex nums */ evoVals[2]=midVals; console.log("Merged baseVals("+JSON.stringify(baseVals)+"), finalVals("+JSON.stringify(finalVals)+"), and midVals("+JSON.stringify(midVals)+") into evoVals("+JSON.stringify(evoVals)+")"); /* create our rank object to compute cps/hps from for output string */ evoVals=getRanks(evoVals, limit, trash, hundo, zero, onlyZero, league); const mergedRanks=evoVals[1][6]; const rLength=evoVals[1][6].numRanks; console.log("rLength: "+rLength); var rKeys=Object.keys(mergedRanks), message; output.value=''; /* ensure old output and feedback are both */ document.getElementById('feedbackBox').innerHTML=""; /* cleared */ document.getElementById('overflow1').value=""; document.getElementById('overflow2').value=""; document.getElementById('overflow3').value=""; document.getElementById('overflow4').value=""; var cps=[], hps=[], results, i, j; cps[0]=new Set(); hps[0]=new Set(); cps[1]=new Set(); hps[1]=new Set(); cps[2]=new Set(); hps[2]=new Set(); cps[3]=new Set(); hps[3]=new Set(); /*cps[4]=new Set(); hps[4]=new Set();*/ var maxCP=new Array(5).fill(0), maxHP=new Array(5).fill(0); if (onlyZero){if (trash){message="This string only finds 0% IVs, and is NOT a trash string. Please uncheck 'Trash String' (top)"; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>";}else{message="This string ignores PvP rankings. For PvP rankings please uncheck 'Only Find 0% IVs' (bottom)"; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>";}results=getZeroCPs(baseVals[1], baseVals[2], baseVals[3], cpm, maxCP, maxHP, cps[0], hps[0]); cps[0]=results[0]; hps[0]=results[1]; maxCP=results[2]; maxHP=results[3]; outputCPsHPsBuckets(cps.slice(), maxCP, hps.slice(), maxHP, output, baseVals[0], cpstr, hpstr, trash, hundo, onlyZero); message="String finds only potential 0% IV (0/0/0) "+baseVals[4]+", not PvP ranks"; document.getElementById('outputSummaryBox').innerHTML="<p>"+message+"</p>"; return output;}else{if ((!zero) && (trash)){results=getZeroCPs(baseVals[1], baseVals[2], baseVals[3], cpm, maxCP, maxHP, cps[0], hps[0]); cps[0]=results[0]; hps[0]=results[1]; maxCP=results[2]; maxHP=results[3];}console.log("Entering cp/hp generation loop..."); /* generate all the cps and hps for matching */ /* for ranks 1 to user limit, up to maxLvl (L) for league */ for (i=0; i<rLength; i++){for (j=0; j<mergedRanks[rKeys[i]].length; j++){/* start at maxLvl (up to league limit) */ var maxLvl=(mergedRanks[rKeys[i]][j].L - 1)*2; /* see if this is a half-level (these don't spawn in the wild) */ if (maxLvl%2 !=0){/* ensure we build search string only on "full" levels */ maxLvl=maxLvl - 1; /* set to non-half level */}/* skip half level CPs in search strings to improve accuracy */ for( var level=maxLvl; level >=0; level=level - 2 ){var cp=Math.max(10, Math.floor((baseVals[1]/1 + mergedRanks[rKeys[i]][j].IVs.A) * Math.sqrt(baseVals[2]/1 + mergedRanks[rKeys[i]][j].IVs.D) * Math.sqrt(baseVals[3]/1 + mergedRanks[rKeys[i]][j].IVs.S) * cpm[level] * cpm[level] / 10)); /* generate hps for more accurate search string matching */ var hp=Math.max(10, Math.floor((baseVals[3]/1 + mergedRanks[rKeys[i]][j].IVs.S) * cpm[level])); /* bucket CPs and HPs into appraisal ratings for more accurrate matching */ switch (mergedRanks[rKeys[i]][j].IVs.star){case "0*": cps[0].add(cp); hps[0].add(hp); if (maxCP[0] < cp){maxCP[0]=cp;}if (maxHP[0] < hp){maxHP[0]=hp;}break; case "1*": cps[1].add(cp); hps[1].add(hp); if (maxCP[1] < cp){maxCP[1]=cp;}if (maxHP[1] < hp){maxHP[1]=hp;}break; case "2*": cps[2].add(cp); hps[2].add(hp); if (maxCP[2] < cp){maxCP[2]=cp;}if (maxHP[2] < hp){maxHP[2]=hp;}break; case "3*": cps[3].add(cp); hps[3].add(hp); if (maxCP[3] < cp){maxCP[3]=cp;}if (maxHP[3] < hp){maxHP[3]=hp;}break; case "4*": /*cps[4].add(cp); hps[4].add(hp);*/ if (maxCP[4] < cp){maxCP[4]=cp;}if (maxHP[4] < hp){maxHP[4]=hp;}break;}}}}}/* get actual maxCP and maxHP using spread syntax */ if ((league=="All") && (trash)){/*console.log("outputStr: About to update maxCP:"+JSON.stringify(maxCP)+", and maxHP:"+JSON.stringify(maxHP));*/ maxCP.fill(Math.max(...maxCP)); maxHP.fill(Math.max(...maxHP)); console.log("outputStr: Updated maxCP:"+JSON.stringify(maxCP)+", and maxHP:"+JSON.stringify(maxHP));}/* output the CPs and HPs */ /* var newArray=oldArray.slice(); */ console.log("outputStr: First call to outputCPsHPsBuckets..."); outputCPsHPsBuckets(cps.slice(), maxCP, hps.slice(), maxHP, output, baseVals[0], cpstr, hpstr, trash, hundo, onlyZero); var origOut=output.value; console.log("Checking output length..."); if (origOut.length > 2000){document.getElementById('overflow1').value=output.value.slice(0, 2000); document.getElementById('overflow2').value=output.value.slice(2001, 4000); document.getElementById('overflow3').value=output.value.slice(4001, 6000); document.getElementById('overflow4').value=output.value.slice(6001, output.value.length);}console.log("outputStr: First output length - origOut.length="+origOut.length); if (origOut.length > 2000){console.log("Too long for iOS:"+origOut.length+" with short:"+short); if (short===false){var uri=window.location.href.split("?")[0]; uri=encodeURI(uri + "?mon="+finalVals[4]+"&r="+limit+"&cp="+league+"&o="+binary.replace(/.$/,'1')+"&l="+document.getElementById('lang').value.split(',')[0]); message="This string is "+output.value.length+" characters long, which is over the 2000 character iOS Text Replacement limit. Please <a href='"+uri+"'>click here</a> to re-generate this Search String with truncation enabled to ensure the output is <2000 characters."; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>"; document.getElementById('overflow1').value=output.value.slice(0, 2000); document.getElementById('overflow2').value=output.value.slice(2001, 4000); document.getElementById('overflow3').value=output.value.slice(4001, 6000); document.getElementById('overflow4').value=output.value.slice(6001, output.value.length);}else{/* Need to shorten string somehow */ var lenDiff=origOut.length - 2000; console.log("Need to shorten output by "+lenDiff+" characters for iOS"); var hpArr=[], fullHPs=[]; for (i=0; i<hps.length; i++){hpArr[i]=Array.from(hps[i]); fullHPs.push(...hpArr[i]); hpArr[i].sort((a, b)=> a - b); /*console.log("Working with hpArr["+i+":"+hpArr[i]);*/ hpArr[i]=',' + get_matching_string(hpArr[i], hpstr); /*console.log("Full string for hpArr["+i+":"+hpArr[i]);*/ hpArr[i]=hpArr[i].length; console.log("Length of hpArr["+i+"]:"+hpArr[i]);}/* count up current total hp characters length */ var oldHPlen=hpArr.reduce((a, b)=> a + b, 0); console.log("Computed oldHPlen:"+oldHPlen+", fullHPs.length:"+fullHPs.length); /* remove duplicate HPs by converting to a Set then back to sorted Array */ fullHPs=(Array.from([...new Set(fullHPs)])).sort((a, b)=> a - b); /*console.log("fullHPs:"+JSON.stringify(fullHPs));*/ fullHPs=',' + get_matching_string(fullHPs, hpstr); /*console.log("fullHPs:"+JSON.stringify(fullHPs));*/ console.log("(oldHPlen-fullHPs.length) > lenDiff:"+((oldHPlen-fullHPs.length) > lenDiff)); if ((oldHPlen-fullHPs.length) > lenDiff){var emptyHPs=new Array(5).fill(0); for (i=0; i<emptyHPs.length; emptyHPs++){emptyHPs[i]=new Set();}console.log("outputStr: Calling outputCPsHPs without HPs..."); outputCPsHPsBuckets(cps.slice(), maxCP, emptyHPs.slice(), 0, output, baseVals[0], cpstr, hpstr, trash, hundo, onlyZero); console.log("outputStr: No hps output length:"+output.value.length); if (output.value.length > 2000){/* too long without any HPs */ console.log("outputStr: Calling outputCPsHPsCombined..."); outputCPsHPsCombined(cps.slice(), maxCP, hps.slice(), maxHP, output, baseVals[0], cpstr, hpstr, trash, hundo, onlyZero, league); console.log("outputStr: outputCPsHPsCombined length:"+output.value.length); if (output.value.length > 2000){if (output.value.length > origOut.length){output.value=origOut; console.log("Ignoring combined output as it has more characters than bucketized output, reverting...");}message="This string is "+output.value.length+" characters long, which is over the 2000 character iOS Text Replacement limit. Please narrow the scope of your Search String and try again to ensure the output is <2000 characters."; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>"; return true;}message="This string is now "+output.value.length+" characters long, but originally was "+origOut.length+" characters long. For more accuracy please uncheck '2000 Character Max' below."; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>"; return true;}else{/* determine which HPs we can add back to the string */ console.log("We can add some HPs back because output.value.length="+output.value.length); message="NEED MORE CODING!"; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>"; return true;}}/*var minSet=Math.min( ...hpArr ), maxSet=Math.max( ...hpArr ); console.log("Found minSet:"+minSet+" and maxSet:"+maxSet+" from:"+JSON.stringify(hpArr)); console.log("hpArr.indexOf(minSet):"+hpArr.indexOf(minSet)); console.log("Array.from(hps[hpArr.indexOf(minSet)]):"+(Array.from(hps[hpArr.indexOf(minSet)])).sort((a, b)=> a - b)); console.log("hpArr.indexOf(maxSet):"+hpArr.indexOf(maxSet)); console.log("Array.from(hps[hpArr.indexOf(maxSet)]):"+(Array.from(hps[hpArr.indexOf(maxSet)])).sort((a, b)=> a - b));*/ /*if (maxSet > lenDiff){/* just need to remove one HP set */ /*if (minSet > lenDiff){/* we can just remove the smallest HP set to be under max */ /*}}else if (oldHPlen - fullHPs.length > lenDiff){console.log("oldHPlen("+oldHPlen+") - fullHPs.length("+fullHPs.length+") > lenDiff("+lenDiff+"):"+oldHPlen - fullHPs.length > lenDiff);}else{console.log("oldHPlen("+oldHPlen+") - fullHPs.length("+fullHPs.length+") < lenDiff("+lenDiff+"):"+oldHPlen - fullHPs.length < lenDiff);}console.log("outputStr: Second call to outputCPsHPs..."); /* Last ditch effort to get under 2000 characters...*/ console.log("outputStr: Falling back to old method as last ditch effort to be under 2000 characters, calling outputCPsHPsCombined..."); outputCPsHPsCombined(cps.slice(), maxCP, hps.slice(), maxHP, output, baseVals[0], cpstr, hpstr, trash, hundo, onlyZero, league); if (output.value.length > 2000){message="This string is "+output.value.length+" characters long, which is over the 2000 character iOS Text Replacement limit. Please narrow the scope of your Search String and try again to ensure the output is <2000 characters."; document.getElementById('feedbackBox').innerHTML="<p><i>"+message+"</i></p>";}}}if (baseVals[4]=="Burmy"){if (finalVals[4]=="Mothim"){console.log("Found Mothim!"); output.value +="&male";}else if (finalVals[4].indexOf("Wormadam") > -1 ){console.log("Found:"+baseVals[4]); output.value +="&female";}}return output;}function outputCPsHPsBuckets(cps, maxCP, hps, maxHP, output, id, cpstr, hpstr, trash, hundo, onlyZero){console.log("--outputCPsHPsBuckets: maxCP:"+JSON.stringify(maxCP)+", maxHP:"+JSON.stringify(maxHP)+", trash:"+trash+" hundo:"+hundo+", onlyZero:"+onlyZero); var emptyBuf=""; output.value=id; /* add dex num */ var maxLoops=(onlyZero) ? 1:5; /* only process 0* if onlyZero is true */ /* output cps and hps */ for (var i=0; i<maxLoops; i++){if (i==4){/* handle 4* case */ if ((trash) && (!hundo)){emptyBuf +='&!'+i+'*';}else{emptyBuf +=','+i+'*';}continue;}/* skip empty sets */ if (cps[i].size > 0){/* only flip CPs/HPs if non-zero */ if ((trash) && (!onlyZero)){cps[i]=trashFlip(cps[i], maxCP[i]); /* skip empty hps */ if (hps[i].size > 0){hps[i]=trashFlip(hps[i], maxHP[i]);}}/* output CPs */ cps[i]=Array.from(cps[i]); cps[i].sort((a, b)=> a - b); output.value +='&!'+i+'*,' + get_matching_string(cps[i], cpstr); if (!trash){output.value +='&!'+i+'*';}/* skip empty hps */ console.log("--outputCPsHPsBuckets: hps["+i+"].size:"+hps[i].size); if (hps[i].size > 0){hps[i]=Array.from(hps[i]); hps[i].sort((a, b)=> a - b); output.value +=',' + get_matching_string(hps[i], hpstr);}}else if (trash){if ((i==0) && (cps[0].size==0) && (cps[1].size==0) && (cps[2].size==0) && (cps[3].size==0) && (cps[4].size > 0)){emptyBuf +='&'+i+'*'; /* correct rank 1 trash string when rank 1 is 4* (Medi) */}}else{/* skip empty appraisal sets in search string */ emptyBuf +='&!'+i+'*';}}output.value +=emptyBuf; /* add trash stuff */ console.log("--outputCPsHPsBuckets: Generated string is "+output.value.length+" characters long"); return true;}function outputCPsHPsCombined(cps, maxCP, hps, maxHP, output, id, cpstr, hpstr, trash, hundo, onlyZero, league){var allCPs, allHPs, allMaxCP, allMaxHP, hpBuf; var tempCPs=[], tempHPs=[]; /* merge all CPs and HPs into one set */ for (var i=0; i<4; i++){/* skip 4* */ tempCPs=tempCPs.concat(Array.from(cps[i])); tempHPs=tempHPs.concat(Array.from(hps[i]));}/* https://stackoverflow.com/a/9229821 */ allCPs=new Set([...new Set(tempCPs)]); allHPs=new Set([...new Set(tempHPs)]); allMaxCP=Math.max(...maxCP); allMaxHP=Math.max(...maxHP); console.log("--outputCPsHPsCombined: Regenerating string to try to be under 2000 character limit..."); /* fall back to old system to save characters */ output.value=""; /* clear the old and too long output */ if (trash){/* flip CPs and HPs for trashing */ allCPs=trashFlip(allCPs, allMaxCP); allHPs=trashFlip(allHPs, allMaxHP); /* output CPs and HPs */ allCPs=Array.from(allCPs); allCPs.sort((a, b)=> a - b); output.value +=id + '&' + get_matching_string(allCPs, cpstr); hpBuf=""; if (output.value.length < 2000){allHPs=Array.from(allHPs); allHPs.sort((a, b)=> a - b); hpBuf=',' + get_matching_string(allHPs, hpstr); if ((output.value.length + hpBuf.length) <=2000){output.value +=hpBuf;}else{console.log("--outputCPsHPsCombined: output.value.length:"+output.value.length+" + hpBuf.length:"+hpBuf.length+" will be over 2000 char limit, dropping hpBuf");}}else{console.log("--outputCPsHPsCombined: output.value.length:"+output.value.length+" is over 2000 char limit, skipped hpBuf");}}else{/* output CPs and HPs */ allCPs=Array.from(allCPs); allCPs.sort((a, b)=> a - b); output.value +=id + '&' + get_matching_string(allCPs, cpstr); hpBuf=""; if (output.value.length < 2000){allHPs=Array.from(allHPs); allHPs.sort((a, b)=> a - b); allHPs='&' + get_matching_string(allHPs, hpstr); if ((output.value.length + hpBuf.length) <=2000){output.value +=hpBuf;}else{console.log("--outputCPsHPsCombined: output.value.length:"+output.value.length+" + hpBuf.length:"+hpBuf.length+" will be over 2000 char limit, dropping hpBuf");}}}if ((trash) && (!hundo) && (!onlyZero)){output.value +='&!4*';}console.log("--outputCPsHPsCombined: Final length:"+output.value.length); return true;}function getZeroCPs(baseatk, basedef, basesta, cpm, maxCP, maxHP, cps, hps){/* generate all the cps and hps for matching */ var maxLvl=(30 - 1)*2; /* highest level possible without IV boost (L30) */ /* see if this is a half-level (these don't spawn in the wild) */ if (maxLvl%2 !=0){/* ensure we build search string only on "full" levels */ maxLvl=maxLvl - 1; /* set to non-half level */}/* skip half level CPs in search strings to improve accuracy */ for( var level=maxLvl; level >=0; level=level - 2 ){var cp=Math.max(10, Math.floor((baseatk/1 + 0) * Math.sqrt(basedef/1 + 0) * Math.sqrt(basesta/1 + 0) * cpm[level] * cpm[level] / 10)); /* generate hps for more accurate search string matching */ var hp=Math.max(10, Math.floor((basesta/1 + 0) * cpm[level])); /* update counters for maxCP and maxHP */ if (maxCP[0] < cp){maxCP[0]=cp;}if (maxHP[0] < hp){maxHP[0]=hp;}cps.add(cp); hps.add(hp);}return [cps, hps, maxCP, maxHP];}function trashFlip(cps, maxCP){if (cps instanceof Set){/*console.log("trashFlip: Entering loop with maxCP:"+maxCP+" cps("+cps+"):"+JSON.stringify(Array.from(cps).sort((a, b)=> a - b))); */ for (var i=10; i<=maxCP; i++){if( cps.has(i) ){cps.delete(i);}else{cps.add(i);}}/*console.log("trashFlip: After loop cps:"+JSON.stringify(Array.from(cps).sort((a, b)=> a - b))); */ return cps;}else{console.log("trashFlip: ERROR: received cps as "+typeof cps+" instead of expected set"); document.getElementById('feedbackBox').innerHTML="ERROR: Please try again. If this persists, please send us the URL via <a href='https://discord.gg/UD4Temq'>Discord!</a>"; return false;}}function get_matching_string(a, t){var list='', last=-1; for( var i=0; i < a.length; i++ ){if( a[i]==last + 1 ){list +='-'; last=a[i]; while( ++i < a.length ){if( a[i] !=last + 1 ) break; last=a[i];}if( a[--i] < 9999 ){list +=a[i];}}else{list +=',' + t + a[i]; last=a[i];}}return list.substr(1);}function saveLast(){lastLeague=document.getElementById('league').value;}function autocopy(e){e.select(); document.execCommand('copy');}</script> <h3>Settings:</h3> <label>Trash Perfect IVs:<input id="hundo" type="checkbox" oninput="start()"></label><br/> <label>Trash Zero IVs:<input id="zero" type="checkbox" checked oninput="start()"></label><br/> <label>Only Find 0% IVs:<input id="onlyZero" type="checkbox" oninput="start()"></label><br/> <label>Use Base Evolution:<input id="base" type="checkbox" checked oninput="start()"></label><br/> <label>Use Baby Form:<input id="baby" type="checkbox" oninput="start()"></label><br/> <label>2000 Character Max (iOS):<input id="short" type="checkbox" oninput="start()"></label><br/> <label>Language:<select id="lang" oninput="start()"> <option value="en,cp,hp">English</option> <option value="ja,cp,hp">Japanese</option> <option value="fr,pc,pv">French</option> <option value="es,pc,puntos de salud">Spanish</option> <option value="de,wp,kp">German</option> <option value="il,pl,punti salute">Italian</option> <option value="ko,cp,hp">Korean</option> <option value="zh,cp,hp">Chinese</option> <option value="pt,pc,ps">Portuguese</option></select> </label><br/><br/> <textarea id="overflow1" rows="1" style="width: 50%; height: 50%;" onclick="autocopy(this)"></textarea> <textarea id="overflow2" rows="1" style="width: 50%; height: 50%;" onclick="autocopy(this)"></textarea> <textarea id="overflow3" rows="1" style="width: 50%; height: 50%;" onclick="autocopy(this)"></textarea> <textarea id="overflow4" rows="1" style="width: 50%; height: 50%;" onclick="autocopy(this)"></textarea> <div style="overflow-x:auto;"><br/> <p style="color:silver;font-size:0.6em">This site is protected by reCAPTCHA and the Google <a style="color:#AED6F1" href="https://policies.google.com/privacy">Privacy Policy</a> and <a style="color:#AED6F1" href="https://policies.google.com/terms">Terms of Service</a> apply.</p></div></section> </body></html>